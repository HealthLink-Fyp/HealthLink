"use strict";(self.webpackChunkHealth360Front=self.webpackChunkHealth360Front||[]).push([[214],{6214:(Xt,k,r)=>{r.r(k),r.d(k,{DashboardsModule:()=>$t});var d=r(6814),p=r(1865),t=r(5879);let I=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboards"]],decls:0,vars:0,template:function(o,i){}})}return n})();var f=r(9327),h=r(7503),v=r(617),g=r(2296),C=r(1274),b=r(9038),Z=r(2651),M=r(7008);let J=(()=>{class n{constructor(e){this.doctorService=e,this.doctorData={},this.totalAppointments=0,this.uniquePatientCount=0,this.option={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:this.uniquePatientCount,name:"Total Patients"}]}]},this.updateChartData()}ngOnInit(){this.doctorService.getDoctor().subscribe(e=>{this.doctorData=e}),this.doctorService.getbookedAppointments().subscribe(e=>{this.totalAppointments=e.length,this.uniquePatientCount=[...new Set(e.map(o=>o.patient))].length,this.updateChartData()})}updateChartData(){this.option.series&&Array.isArray(this.option.series)&&this.option.series.length>0&&(this.option.series[0].data=[{value:this.totalAppointments,name:"Total Appointments"},{value:this.uniquePatientCount,name:"Unique Patients"}])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.O))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-doc"]],decls:63,vars:5,consts:[[1,"welcomediv"],[1,"wcard"],["lazyLoad","","src","https://www.einfosoft.com/templates/admin/cliniva/source/light/assets/images/pages/welcome.png","alt","",1,"wimage"],[1,"wname"],[1,"metricCards"],[1,"metric"],[1,"mcard"],["lazyLoad","","src","https://static.vecteezy.com/system/resources/thumbnails/014/495/856/small/hand-injury-icon-outline-style-vector.jpg",1,"mimage"],[1,"mname"],[1,"mscore"],[1,"mstat"],["lazyLoad","","src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSMxH5C9m86wP6ThD7Fkleg6rfUZY4FgqSAb0-ZtGmH5Q&s",1,"mimage"],["lazyLoad","","src","https://play-lh.googleusercontent.com/umhQAisu6vYe9oEiNSqr02H2nkT3iPtgYFye2E-VKZraV9Wcsk_kPSln7KnHiDRXHXo=w240-h480-rw",1,"mimage"],["lazyLoad","","src","https://static.vecteezy.com/system/resources/thumbnails/021/495/923/small_2x/internet-explorer-browser-logo-brand-symbol-design-software-illustration-free-vector.jpg",1,"mimage"],[1,"vmetrices"],[1,"barparent"],[1,"barchart"],["echarts","",3,"options"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div")(4,"h4"),t._uU(5," Welcome back "),t.TgZ(6,"div",3),t._uU(7),t.qZA()(),t.TgZ(8,"p"),t._uU(9," We would like to take this opportunity to welcome you to our practice and to thank you for choosing our physicians to participate in your healthcare. We look forward to providing you with personalized, comprehensive health care focusing on wellness and prevention. "),t.qZA()()()(),t.TgZ(10,"div",4)(11,"div",5)(12,"div",6),t._UZ(13,"img",7),t.TgZ(14,"div")(15,"h4",8),t._uU(16," Patients "),t.TgZ(17,"div",9),t._uU(18),t.qZA()(),t.TgZ(19,"p",10)(20,"mat-icon"),t._uU(21,"trending_up"),t.qZA(),t._uU(22,"10% Higher Then Last Month "),t.qZA()()()(),t.TgZ(23,"div",5)(24,"div",6),t._UZ(25,"img",11),t.TgZ(26,"div")(27,"h4",8),t._uU(28," Appointments "),t.TgZ(29,"div",9),t._uU(30),t.qZA()(),t.TgZ(31,"p",10)(32,"mat-icon"),t._uU(33,"trending_up"),t.qZA(),t._uU(34,"10% Higher Then Last Month "),t.qZA()()()(),t.TgZ(35,"div",5)(36,"div",6),t._UZ(37,"img",12),t.TgZ(38,"div")(39,"h4",8),t._uU(40," Blood Pressure "),t.TgZ(41,"div",9),t._uU(42,"110/70"),t.qZA()(),t.TgZ(43,"p",10)(44,"mat-icon"),t._uU(45,"trending_up"),t.qZA(),t._uU(46,"10% Higher Then Last Month "),t.qZA()()()(),t.TgZ(47,"div",5)(48,"div",6),t._UZ(49,"img",13),t.TgZ(50,"div")(51,"h4",8),t._uU(52," Hooked Meeting "),t.TgZ(53,"div",9),t._uU(54),t.qZA()(),t.TgZ(55,"p",10)(56,"mat-icon"),t._uU(57,"trending_up"),t.qZA(),t._uU(58,"10% Higher Then Last Month "),t.qZA()()()()(),t.TgZ(59,"div",14)(60,"div",15)(61,"div",16),t._UZ(62,"div",17),t.qZA()()()),2&o&&(t.xp6(7),t.Oqu(i.doctorData.full_name),t.xp6(11),t.Oqu(i.uniquePatientCount),t.xp6(12),t.Oqu(i.totalAppointments),t.xp6(24),t.Oqu(i.totalAppointments),t.xp6(8),t.Q6J("options",i.option))},dependencies:[v.Hw,M._w],styles:[".welcomediv[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.wcard[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgb(242,244,249);border-radius:10px;box-shadow:#b7c0ce33 0 0 10px;display:flex;flex-direction:row;align-items:center;margin:21px 21px 10px}.wimage[_ngcontent-%COMP%]{width:100%!important}.wname[_ngcontent-%COMP%]{color:#2196f3;font-size:25px;font-weight:500;grid-area:auto;letter-spacing:.5px;line-height:24px;padding:4px 0 0}.bcrumb[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;color:#444;font-size:20px;position:relative;left:6px;top:6px}.breadcrumb[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;left:64px;top:20px}.metricCards[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;margin:30px}.metric[_ngcontent-%COMP%] > .mcard[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgb(242,244,249);border-radius:10px;box-shadow:#b7c0ce33 0 0 10px;display:flex;flex-direction:row;align-items:center;position:relative}.mname[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;color:#212529;font-size:16px;line-height:28px;position:relative;left:59px;top:1px}.mscore[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:700;color:#4caf50;font-size:16px;line-height:28px;position:relative;left:63px;top:4px}.mstat[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:400;color:#212529;font-size:12px;line-height:20px;position:relative;left:-34px;top:11px}.mimage[_ngcontent-%COMP%]{max-width:100%;height:80px;position:relative;left:12px;top:-16px}.barparent[_ngcontent-%COMP%]{margin:100px;width:100%;height:100%}"]})}return n})(),Y=(()=>{class n{constructor(e,o){this.doctorService=e,this.authService=o,this.doctorData={}}ngOnInit(){this.doctorService.getDoctor().subscribe(e=>{this.doctorData=e})}logout(){this.authService.logout().subscribe(()=>{this.authService.accessToken="",f.e.authEmitter.emit(!1)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.O),t.Y36(f.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dsidenav"]],decls:52,vars:1,consts:[[1,"toolbar"],["mat-icon-button","",3,"click"],["routerLink","/patient/medicalStore",1,"nav-link"],["routerLink","/patient/labTests",1,"nav-link"],[1,"whole"],[1,"profile"],[1,"pname"],["src","assets/avatars/avatar06.jpg","alt","Avatar",1,"avatar"],["autosize",""],["opened","true","mode","side","position","start"],["drawer",""],["routerLink","card","mat-button",""],["routerLink","/doctor/appointments","mat-button",""],["routerLink","/doctor/chat","mat-button",""],["routerLink","/doctor/settings","mat-button",""],["mat-button","","routerLink","/",3,"click"],[1,"bodie"]],template:function(o,i){if(1&o){const a=t.EpF();t.TgZ(0,"div")(1,"mat-toolbar",0)(2,"h1")(3,"button",1),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(22);return t.KtG(u.toggle())}),t.TgZ(4,"mat-icon"),t._uU(5,"menu"),t.qZA()()(),t.TgZ(6,"h1"),t._uU(7,"HealthLink 360"),t.qZA(),t.TgZ(8,"h1")(9,"a",2),t._uU(10,"Medicines"),t.qZA()(),t.TgZ(11,"h1")(12,"a",3),t._uU(13,"Lab Tests"),t.qZA()(),t.TgZ(14,"h1")(15,"div",4)(16,"div",5)(17,"h2",6),t._uU(18),t.qZA(),t._UZ(19,"img",7),t.qZA()()()()(),t.TgZ(20,"mat-drawer-container",8)(21,"mat-drawer",9,10)(23,"mat-nav-list")(24,"mat-list-item")(25,"button",11)(26,"mat-icon"),t._uU(27,"dashboard"),t.qZA(),t._uU(28," Dashboard "),t.qZA()(),t.TgZ(29,"mat-list-item")(30,"button",12)(31,"mat-icon"),t._uU(32,"assignment"),t.qZA(),t._uU(33," Appointments "),t.qZA()(),t.TgZ(34,"mat-list-item")(35,"button",13)(36,"mat-icon"),t._uU(37," chat"),t.qZA(),t._uU(38," Chat "),t.qZA()(),t.TgZ(39,"mat-list-item")(40,"button",14)(41,"mat-icon"),t._uU(42,"settings"),t.qZA(),t._uU(43," Settings "),t.qZA()(),t.TgZ(44,"mat-list-item")(45,"button",15),t.NdJ("click",function(){return i.logout()}),t.TgZ(46,"mat-icon"),t._uU(47,"power_settings_new"),t.qZA(),t._uU(48," Logout "),t.qZA()()()(),t.TgZ(49,"mat-drawer-content")(50,"div",16),t._UZ(51,"app-doc"),t.qZA()()()}2&o&&(t.xp6(18),t.Oqu(i.doctorData.full_name))},dependencies:[p.rH,v.Hw,g.lW,g.RK,C.Ye,b.Hk,b.Tg,Z.jA,Z.kh,Z.LW,J],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;background-color:#fff;padding:10px;border-bottom:1px solid #ccc}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-right:20px}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:nth-last-child(1){margin-left:auto}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.bodie[_ngcontent-%COMP%]{background-color:#f0f3fb}.avatar[_ngcontent-%COMP%]{vertical-align:middle;width:50px;height:50px;border-radius:50%;position:relative;left:11px;top:-3px}.whole[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]{display:flex;flex-direction:row}.pname[_ngcontent-%COMP%]{position:relative;left:0;top:12px}"]})}return n})();var l=r(6223);const H=[["general_practice","General Practice"],["child_care","Child Care"],["women_health","Women Health"],["bone_joint_care","Bone & Joint Care"],["heart_care","Heart Care"],["skin_care","Skin Care"],["eye_care","Eye Care"],["dental_care","Dental Care"],["mental_health","Mental Health"],["brain_nervous_system_care","Brain & Nervous System Care"],["digestive_health","Digestive Health"],["urinary_tract_health","Urinary Tract Health"],["cancer_care","Cancer Care"],["ear_nose_throat_care","Ear, Nose & Throat Care"],["hormone_health","Hormone Health"],["joint_health","Joint Health"],["allergy_immune_system_care","Allergy & Immune System Care"],["lung_respiratory_health","Lung & Respiratory Health"],["kidney_health","Kidney Health"],["physical_therapy","Physical Therapy"]],E=[["mbbs","MBBS"],["bds","BDS"],["md","MD"]],Q=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];var B=r(2212);function L(n,s){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e[0]),t.xp6(1),t.hij(" ",e[1]," ")}}function z(n,s){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e[0]),t.xp6(1),t.hij(" ",e[1]," ")}}function R(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",20),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChange(i))}),t.qZA(),t.TgZ(2,"label"),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(2),t.Oqu(e)}}function V(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleUpdateMode())}),t._uU(1,"Cancel"),t.qZA()}}let $=(()=>{class n{constructor(e,o,i,a,c,u){this.formBuilder=e,this.doctorService=o,this.authService=i,this.router=a,this.route=c,this.notifyService=u,this.message="",this.isUpdateMode=!1,this.SPECIALIZATION_CHOICES=H,this.QUALIFICATION_CHOICES=E,this.availableDays=Q}ngOnInit(){this.route.queryParams.subscribe(e=>{this.isUpdateMode=e.updateMode||!1,this.createForm(),this.isUpdateMode&&this.getDoctorDataFields()})}createForm(){this.form=this.formBuilder.group({specialization:"",qualification:"",experience_years:"",city:"",available_timings:"",consultation_fees:"",availability_data:this.formBuilder.group({days:this.formBuilder.array([]),start:"",end:""}),summary:"",wait_time:""})}onChange(e){!function j(n,s){const e=n.target.value,o=n.target.checked,i=s.get("availability_data.days");if(o)i.push(new l.NI(e));else{let a=0;i.controls.forEach(c=>{c.value==o&&i.removeAt(a),a++})}}(e,this.form)}submit(){this.doctorService[this.isUpdateMode?"updateDoctorProfile":"register"](this.form.getRawValue()).subscribe(o=>{console.log(o),this.notifyService.showSuccess("Successfully Created Doctor Profile!"),this.router.navigate(["/doctor/dashboard"])},o=>{console.error(o),this.notifyService.showError("Error! Please Fill Out Form.")})}Done(){this.router.navigate(["/doctor/dashboard"])}getDoctorDataFields(){this.doctorService.getDoctor().subscribe(e=>this.form.patchValue(e))}toggleUpdateMode(){this.isUpdateMode=!this.isUpdateMode}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(l.qu),t.Y36(h.O),t.Y36(f.e),t.Y36(p.F0),t.Y36(p.gz),t.Y36(B.c))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dform"]],decls:54,vars:6,consts:[[1,"bounce-in-left"],[1,"card"],[3,"formGroup","submit"],["formControlName","specialization"],[3,"value",4,"ngFor","ngForOf"],["formControlName","qualification"],["type","text","formControlName","experience_years"],["type","text","formControlName","city"],["type","time","formControlName","available_timings"],["formGroupName","availability_data"],[4,"ngFor","ngForOf"],["type","time","formControlName","start"],["type","time","formControlName","end"],["type","number","formControlName","consultation_fees"],["type","text","formControlName","summary"],["type","number","formControlName","wait_time"],["type","submit"],[3,"click"],[3,"click",4,"ngIf"],[3,"value"],["type","checkbox",3,"value","change"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("submit",function(){return i.submit()}),t.TgZ(3,"h1"),t._uU(4,"Doctor Form:"),t.qZA(),t.TgZ(5,"div")(6,"label"),t._uU(7,"Specialization"),t.qZA(),t.TgZ(8,"select",3),t.YNc(9,L,2,2,"option",4),t.qZA()(),t.TgZ(10,"div")(11,"label"),t._uU(12,"Qualification"),t.qZA(),t.TgZ(13,"select",5),t.YNc(14,z,2,2,"option",4),t.qZA()(),t.TgZ(15,"div")(16,"label"),t._uU(17,"Experience"),t.qZA(),t._UZ(18,"input",6),t.qZA(),t.TgZ(19,"div")(20,"label"),t._uU(21,"City"),t.qZA(),t._UZ(22,"input",7),t.qZA(),t.TgZ(23,"div")(24,"label"),t._uU(25,"Availability"),t.qZA(),t._UZ(26,"input",8),t.qZA(),t.TgZ(27,"div",9),t.YNc(28,R,4,2,"div",10),t.TgZ(29,"div")(30,"label"),t._uU(31,"Start Time"),t.qZA(),t._UZ(32,"input",11),t.qZA(),t.TgZ(33,"div")(34,"label"),t._uU(35,"End Time"),t.qZA(),t._UZ(36,"input",12),t.qZA()(),t.TgZ(37,"div")(38,"label"),t._uU(39,"Consultation Fees"),t.qZA(),t._UZ(40,"input",13),t.qZA(),t.TgZ(41,"div")(42,"label"),t._uU(43,"Summary"),t.qZA(),t._UZ(44,"input",14),t.qZA(),t.TgZ(45,"div")(46,"label"),t._uU(47,"Wait Time"),t.qZA(),t._UZ(48,"input",15),t.qZA(),t.TgZ(49,"button",16),t._uU(50),t.qZA()(),t.TgZ(51,"button",17),t.NdJ("click",function(){return i.Done()}),t._uU(52,"Already filled"),t.qZA(),t.YNc(53,V,2,0,"button",18),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("ngForOf",i.SPECIALIZATION_CHOICES),t.xp6(5),t.Q6J("ngForOf",i.QUALIFICATION_CHOICES),t.xp6(14),t.Q6J("ngForOf",i.availableDays),t.xp6(22),t.Oqu(i.isUpdateMode?"Update":"Submit"),t.xp6(3),t.Q6J("ngIf",i.isUpdateMode))},dependencies:[d.sg,d.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u,l.x0],styles:['body[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;display:flex;justify-content:center;align-items:center;background-color:#f0f0f0}.card[_ngcontent-%COMP%]{width:400px;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;background-color:#fff;background-image:url(https://img.freepik.com/free-vector/simple-blue-blank-background-vector-business_53876-169282.jpg);background-repeat:no-repeat;background-size:cover;left:419px;position:relative;right:-419px;top:5px}.mat-mdc-card-title[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.bounce-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-in-left 1.1s both}@keyframes _ngcontent-%COMP%_bounce-in-left{0%{transform:translate(-600px);animation-timing-function:ease-in;opacity:0}38%{transform:translate(0);animation-timing-function:ease-out;opacity:1}55%{transform:translate(-68px);animation-timing-function:ease-in}72%{transform:translate(0);animation-timing-function:ease-out}81%{transform:translate(-28px);animation-timing-function:ease-in}90%{transform:translate(0);animation-timing-function:ease-out}95%{transform:translate(-8px);animation-timing-function:ease-in}to{transform:translate(0);animation-timing-function:ease-out}}']})}return n})();var O=r(9193),U=r(7734),G=r(5222),_=r(7700),K=r(2939),P=r(1551),q=r(1901),D=r(3858),W=r(9773),T=r(9285),S=r(2032);let X=(()=>{class n{constructor(e,o,i,a,c,u,A){this.dialogRef=e,this.data=o,this._snackBar=i,this.service=a,this.CallService=c,this.keyService=u,this.imageCaptureService=A,this.transcription="",this.service.init()}ngOnInit(){this.CallService.peerIdGet().subscribe(e=>{console.log("i m getting the peer id in dialog component"),this.data.peerId=e.peer_id})}startService(){this.service.start()}showCopiedSnackBar(){this._snackBar.open("Peer ID Copied!","Hurrah",{duration:1e3,horizontalPosition:"center",verticalPosition:"top"})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(_.so),t.Y36(_.WI),t.Y36(K.ux),t.Y36(P.U),t.Y36(q.M),t.Y36(D.F),t.Y36(W.D))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dialog"]],decls:10,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",1,"hidden-input",3,"ngModel","disabled","ngModelChange"],["mat-dialog-actions",""],["mat-raised-button","",3,"mat-dialog-close","click"]],template:function(o,i){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Call Info"),t.qZA(),t.TgZ(2,"div",1)(3,"mat-form-field")(4,"mat-label"),t._uU(5),t.qZA(),t.TgZ(6,"input",2),t.NdJ("ngModelChange",function(c){return i.data.peerId=c}),t.qZA()()(),t.TgZ(7,"div",3)(8,"button",4),t.NdJ("click",function(){return i.startService()}),t._uU(9,"Ok"),t.qZA()()),2&o&&(t.xp6(5),t.Oqu(i.data.joinCall?"Meeting started":"Patient Notified"),t.xp6(1),t.Q6J("ngModel",i.data.peerId)("disabled",!i.data.joinCall),t.xp6(2),t.Q6J("mat-dialog-close",i.data.peerId))},dependencies:[g.lW,T.KE,T.hX,l.Fj,l.JJ,l.On,S.Nt,_.ZT,_.uh,_.xY,_.H8],styles:[".hidden-input[_ngcontent-%COMP%]{display:none}"]})}return n})();var x=r(6978),y=r(5195),N=r(4747);const tt=["localVideo"],et=["remoteVideo"];function nt(n,s){if(1&n&&t._UZ(0,"img",31),2&n){const e=t.oxw().$implicit;t.s9C("src",e.past_records,t.LSH)}}function ot(n,s){if(1&n&&(t.TgZ(0,"a",32),t._UZ(1,"i",33),t._uU(2),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.s9C("href",e.past_records,t.LSH),t.xp6(2),t.hij(" ",o.getFileExtension(e.past_records)," ")}}function it(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,nt,1,1,"img",29),t.YNc(2,ot,3,2,"a",30),t.qZA()),2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.past_records&&o.isImage(e.past_records)),t.xp6(1),t.Q6J("ngIf",e.past_records&&!o.isImage(e.past_records))}}function at(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,it,3,2,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.results)}}function st(n,s){1&n&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Ai is thinking..."),t.qZA(),t._UZ(3,"ngx-skeleton-loader",34),t.qZA())}function rt(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function ct(n,s){1&n&&(t.TgZ(0,"ul")(1,"div",37)(2,"div",38),t._UZ(3,"ngx-skeleton-loader",39),t.qZA()()())}function lt(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function dt(n,s){1&n&&(t.TgZ(0,"ul")(1,"div",37)(2,"div",38),t._UZ(3,"ngx-skeleton-loader",39),t.qZA()()())}function pt(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function mt(n,s){1&n&&(t.TgZ(0,"ul")(1,"div",37)(2,"div",38),t._UZ(3,"ngx-skeleton-loader",39),t.qZA()()())}function ut(n,s){if(1&n&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Key Points"),t.qZA(),t.TgZ(3,"ul",35),t.YNc(4,rt,2,1,"li",28),t.qZA(),t.YNc(5,ct,4,0,"ul",10),t.TgZ(6,"div",36)(7,"h2"),t._uU(8,"Follow-up Questions:"),t.qZA(),t.TgZ(9,"div",35),t.YNc(10,lt,2,1,"p",28),t.qZA(),t.YNc(11,dt,4,0,"ul",10),t.qZA(),t.TgZ(12,"h2"),t._uU(13,"Live Possible Causes"),t.qZA(),t.TgZ(14,"ul",35),t.YNc(15,pt,2,1,"li",28),t.qZA(),t.YNc(16,mt,4,0,"ul",10),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.transResponse.key_points),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(5),t.Q6J("ngForOf",e.transResponse.followup_questions),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(4),t.Q6J("ngForOf",e.transResponse.likely_diagnoses),t.xp6(1),t.Q6J("ngIf",e.loading)}}let F=(()=>{class n{goBack(){this.location.back()}constructor(e,o,i,a,c,u,A,Gt,Kt,Wt){this.dialog=e,this.callService=o,this.route=i,this.transcribeService=a,this.authService=c,this.sharedService=u,this.doctorService=A,this.uploadService=Gt,this.recordsService=Kt,this.location=Wt,this.localVideo=null,this.remoteVideo=null,this.videoData={peer_id:"",doctor:"",patient:""},this.transResponse="",this.loading=!1,this.fakeData={key_points:["Patient's name: Tripura Amanda Flores","Patient reluctant to share their name","Location unknown"],likely_diagnoses:["Alzehemier 50%","Headache 40%","Hiv 30%"],followup_questions:["Can you provide your date of birth?","Are you experiencing any specific symptoms or health concerns?","Do you have any medical conditions or take any medications regularly?","Can you describe your current location or any recent travel history?"]},this.results=[],this.viewRecords=!1,this.emotions="",this.AllAi=!0,this.notesSave="",this.isCallStarted$=this.callService.isCallStarted$,this.peerId=this.callService.initPeer(),console.log("real peer id is ",this.peerId),this.videoData.peer_id=this.peerId,this.videoData.patient=this.route.snapshot.paramMap.get("patientId"),this.videoData.doctor=this.route.snapshot.paramMap.get("doctorId"),console.log("information to unlock sending peer id in vid ts : ",this.videoData),this.callService.peerIdSend(this.videoData).subscribe(w=>{console.log("the peer id have been sent vid ts.",w),this.sendCallIdToTranscribeService(w.call_id,w.patient)})}uploadFile(e){this.selectedFile=e.target.files[0]}sendFileToBackend(){const o=new FormData;o.append("past_records",this.selectedFile),this.uploadService.uploadFile(o).subscribe(i=>{console.log("File sent to backend:",i)})}sendCallIdToTranscribeService(e,o){this.transcribeService.data.call_id=e,this.transcribeService.data.patient_id=o}isImage(e){const i=this.getFileExtension(e);return["jpg","jpeg","png","gif"].includes(i)}getFileExtension(e){const o=e.split(".");return o[o.length-1]}ngOnInit(){this.sharedService.onResponseAvailable().subscribe(e=>{0===e.key_points.length&&0===e.likely_diagnoses.length&&0===e.followup_questions.length||(this.loading=!0,setTimeout(()=>{this.AllAi=!1,this.transResponse=e,this.loading=!1},5e3))}),this.recordsService.getRecords().subscribe(e=>{this.results=e.results.map(o=>{if(o.past_records&&o.past_records.includes("http://localhost:8000")){const i=window.location.origin.replace("-4200","-8000");o.past_records=o.past_records.replace("http://localhost:8000",i)}return o})}),this.callService.localStream$.pipe((0,U.h)(e=>!!e)).subscribe(e=>{this.localVideo&&(this.localVideo.nativeElement.srcObject=e)}),this.callService.remoteStream$.pipe((0,U.h)(e=>!!e)).subscribe(e=>{this.remoteVideo&&(this.remoteVideo.nativeElement.srcObject=e)})}onSendDocNotes(){this.doctorService.sendNotes({doctor_notes:this.notesSave,patient:this.videoData.patient,doctor:this.videoData.doctor}).subscribe(o=>{console.log("notes sent to backend",this.notesSave)})}ngOnDestroy(){this.callService.destroyPeer()}showModal(e){this.dialog.open(X,{width:"250px",data:e?{peerId:void 0,joinCall:!0}:{peerId:this.peerId,joinCall:!1}}).afterClosed().pipe((0,G.w)(a=>(0,O.of)(e?this.callService.establishMediaCall(a):this.callService.enableCallAnswer()))).subscribe(a=>{})}endCall(){this.callService.closeMediaCall()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(_.uw),t.Y36(q.M),t.Y36(p.gz),t.Y36(P.U),t.Y36(f.e),t.Y36(D.F),t.Y36(h.O),t.Y36(x.e),t.Y36(x.e),t.Y36(d.Ye))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-videocall"]],viewQuery:function(o,i){if(1&o&&(t.Gf(tt,5),t.Gf(et,5)),2&o){let a;t.iGM(a=t.CRH())&&(i.localVideo=a.first),t.iGM(a=t.CRH())&&(i.remoteVideo=a.first)}},decls:58,vars:14,consts:[[1,"child"],[1,"header"],[1,"toolbar"],["src","https://i.ibb.co/NKnJZ5L/download.png","alt","logo","width","35","height","35",2,"background-color","transparent","margin-top","0.25vw","margin-left","0.5vw","margin-right","1.5vw"],[1,"nav-link",3,"click"],["routerLink","/find-doctors",1,"nav-link"],[1,"body"],[1,"row"],[1,"col"],[1,"child2"],[4,"ngIf"],[1,"recordButtons"],["id","recordsButton","mat-raised-button","","color","primary",3,"click"],["id","recordsButton2","mat-raised-button","","color","warn",3,"click"],[1,"middle"],[1,"container-fluid"],[1,"col","text-center"],["id","video-wrapper"],["id","remote-video","poster","./assets/video-placeholder.jpg","autoplay","","playsinline",""],["remoteVideo",""],["id","local-video","autoplay","","playsinline","",3,"muted"],["localVideo",""],[1,"row","p-2"],["mat-raised-button","","color","primary",1,"m-2",3,"disabled","click"],["mat-raised-button","",1,"m-2",3,"disabled","click"],["mat-raised-button","","color","warn",1,"m-2",3,"disabled","click"],["id","trans",1,"child2"],[1,"child3"],[4,"ngFor","ngForOf"],["alt","Past Records","class","image-size",3,"src",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["alt","Past Records",1,"image-size",3,"src"],["target","_blank",3,"href"],["aria-hidden","true",1,"fa","fa-file-pdf"],["count","10","appearance","line"],[1,"stream-list"],[1,"folloWUP"],[1,"loading"],[1,"item"],["count","5","appearance","line"]],template:function(o,i){1&o&&(t.TgZ(0,"div")(1,"mat-card-content",0)(2,"div",1)(3,"div")(4,"mat-toolbar",2)(5,"h1"),t._UZ(6,"img",3),t.qZA(),t.TgZ(7,"h1")(8,"a",4),t.NdJ("click",function(){return i.goBack()}),t._uU(9,"Back"),t.qZA()(),t.TgZ(10,"h1")(11,"a",5),t._uU(12,"Medicines"),t.qZA()(),t.TgZ(13,"h1")(14,"a",5),t._uU(15,"Lab Tests"),t.qZA()()()(),t._UZ(16,"br"),t.qZA(),t.TgZ(17,"div",6)(18,"div",7)(19,"div",8)(20,"div",9),t._UZ(21,"h1"),t.YNc(22,at,2,1,"div",10),t.qZA(),t.TgZ(23,"div",11)(24,"button",12),t.NdJ("click",function(){return i.viewRecords=!0}),t._uU(25,"Med Records"),t.qZA(),t.TgZ(26,"button",13),t.NdJ("click",function(){return i.viewRecords=!1}),t.TgZ(27,"mat-icon"),t._uU(28,"close"),t.qZA()()()(),t.TgZ(29,"div",8)(30,"div",14)(31,"div",15)(32,"div",7)(33,"div",16)(34,"div",17),t._UZ(35,"video",18,19)(37,"video",20,21),t.qZA()()()(),t.TgZ(39,"div",22)(40,"button",23),t.NdJ("click",function(){return i.showModal(!1)}),t.ALo(41,"async"),t._uU(42,"Start Call"),t.qZA(),t.TgZ(43,"button",24),t.NdJ("click",function(){return i.showModal(!0)}),t.ALo(44,"async"),t._uU(45,"Join Call"),t.qZA(),t.TgZ(46,"button",25),t.NdJ("click",function(){return i.endCall()}),t.ALo(47,"async"),t._uU(48,"End Call"),t.qZA()()()(),t.TgZ(49,"div",8),t.YNc(50,st,4,0,"div",10),t.TgZ(51,"div",26),t.YNc(52,ut,17,6,"div",10),t.qZA()()(),t.TgZ(53,"div",7)(54,"div",8)(55,"div",27),t._UZ(56,"h1"),t._uU(57),t.qZA()()()()()()),2&o&&(t.xp6(22),t.Q6J("ngIf",i.viewRecords),t.xp6(15),t.Q6J("muted",!0),t.xp6(3),t.Q6J("disabled",t.lcZ(41,8,i.isCallStarted$)),t.xp6(3),t.Q6J("disabled",t.lcZ(44,10,i.isCallStarted$)),t.xp6(3),t.Q6J("disabled",!t.lcZ(47,12,i.isCallStarted$)),t.xp6(4),t.Q6J("ngIf",i.AllAi),t.xp6(2),t.Q6J("ngIf",i.transResponse&&(i.transResponse.key_points.length>0||i.transResponse.likely_diagnoses.length>0||i.transResponse.followup_questions.length>0)),t.xp6(5),t.hij(" ",i.emotions," "))},dependencies:[d.sg,d.O5,p.rH,y.dn,v.Hw,g.lW,C.Ye,N.xr,d.Ov],styles:[".toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:nth-last-child(2){margin-left:auto}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:50px;background-color:#fff;box-shadow:0 1px 2px #0000000d,0 1px #0000000d;position:relative;top:12px}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-right:20px}#recordsButton[_ngcontent-%COMP%]{width:10vw;height:2hw;padding:0;margin:0;margin-right:1vw}.recordButtons[_ngcontent-%COMP%]{margin-top:2vw;margin-left:3vw}#recordsButton2[_ngcontent-%COMP%]{width:1vw;height:1hw;margin-left:10vw;margin:0}#recordsButton2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;left:4px;top:4x}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;cursor:pointer}.parent[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.child[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:1em}.header[_ngcontent-%COMP%]{order:-1}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.row[_ngcontent-%COMP%]{display:flex}div.col[_ngcontent-%COMP%]{margin-left:1vw}#video-wrapper[_ngcontent-%COMP%]{height:10px}#trans[_ngcontent-%COMP%]{height:450px}.child2[_ngcontent-%COMP%]{margin:5px;width:345px;height:365px;overflow:auto}.middle[_ngcontent-%COMP%]{margin:5px;width:500px;height:200px}.child3[_ngcontent-%COMP%]{left:269px;position:relative;right:-269px;top:1px}.full-width[_ngcontent-%COMP%]{width:100%}video#local-video[_ngcontent-%COMP%]{border-radius:15px;display:flex;flex-wrap:wrap;justify-content:space-between;inset:-237px -220px 147px 296px;max-height:100px;max-width:100%;object-fit:contain;position:relative;transform:matrix(1,0,0,1,0,130.667)}video#remote-video[_ngcontent-%COMP%]{border-radius:15px;display:flex;flex-wrap:wrap;justify-content:space-between;inset:-123px -71px 147px 53px;max-height:300px;max-width:100%;object-fit:contain;position:relative;transform:matrix(1,0,0,1,0,130.667)}div.row.p-2[_ngcontent-%COMP%]{bottom:46px;display:flex;flex-wrap:wrap;justify-content:space-evenly;margin-top:380px}.folloWUP[_ngcontent-%COMP%]{width:100%;word-wrap:break-word;white-space:normal;overflow-wrap:anywhere}.stream-list[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.stream-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{white-space:normal}.stream-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_stream 5s linear}@keyframes _ngcontent-%COMP%_stream{0%{width:0}to{width:100%}}.item[_ngcontent-%COMP%]{width:200px}.fileUpload[_ngcontent-%COMP%]{width:200px;display:flex;flex-direction:column}.image-size[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover;width:500px}"]})}return n})();var m=r(5313);function gt(n,s){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Scheduled Time"),t.qZA())}function ht(n,s){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.start,"EEEE, MMMM d, y, h:mm a"))}}function _t(n,s){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Ending Time"),t.qZA())}function ft(n,s){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.end,"EEEE, MMMM d, y, h:mm a"))}}function vt(n,s){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Status"),t.qZA())}function bt(n,s){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.appointment_status)}}function xt(n,s){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Payment"),t.qZA())}function Ct(n,s){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.payment_status)}}function Zt(n,s){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Actions"),t.qZA())}const Tt=function(n,s){return["/doctor/videoCall",n,s]};function yt(n,s){if(1&n&&(t.TgZ(0,"button",17),t._uU(1," Join "),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("routerLink",t.WLB(1,Tt,e.patient,e.doctor))}}function At(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell")(1,"button",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDeleteAppointment(a.appointment_id))}),t._uU(2," Delete "),t.qZA(),t.YNc(3,yt,2,4,"button",16),t.qZA()}if(2&n){const e=s.$implicit,o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.isJoinVisible(e.start,e.expiresAt))}}function wt(n,s){1&n&&t._UZ(0,"mat-header-row")}function kt(n,s){1&n&&t._UZ(0,"mat-row")}let Mt=(()=>{class n{constructor(e){this.doctorService=e,this.displayedColumns=["scheduledTime","endingTime","status","actions"],this.bookedAppointments=[]}ngOnInit(){this.onbookedAppointments()}onbookedAppointments(){this.doctorService.getbookedAppointments().subscribe(e=>{this.bookedAppointments=e,this.bookedAppointments.forEach(o=>{o.expiresAt=new Date(o.start).getTime()+18e5}),this.bookedAppointments.sort((o,i)=>new Date(i.start).getTime()-new Date(o.start).getTime())})}isJoinVisible(e,o){const i=new Date(e),a=new Date;return i.getTime()<=a.getTime()&&a.getTime()<=o}onDeleteAppointment(e){this.doctorService.delAppointment(e).subscribe(o=>{console.log("appointment deleted succesfully",o)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.O))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dappointment"]],decls:37,vars:3,consts:[[1,"toolbar"],[1,"jello-vertical"],[1,"nav-link",3,"click"],[1,"nav-link"],["routerLink","/find-doctors",1,"nav-link"],[1,"mat-elevation-z10",3,"dataSource"],["matColumnDef","scheduledTime"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","endingTime"],["matColumnDef","status"],["matColumnDef","payment"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(o,i){1&o&&(t.TgZ(0,"div")(1,"mat-toolbar",0)(2,"h1",1),t._uU(3,"HealthLink 360"),t.qZA(),t.TgZ(4,"h1")(5,"a",2),t.NdJ("click",function(){return i.onbookedAppointments()}),t._uU(6,"Show Appointments"),t.qZA()(),t.TgZ(7,"h1")(8,"a",3),t._uU(9,"Video Consult"),t.qZA()(),t.TgZ(10,"h1")(11,"a",4),t._uU(12,"Medicines"),t.qZA()(),t.TgZ(13,"h1")(14,"a",4),t._uU(15,"Lab Tests"),t.qZA()()()(),t._UZ(16,"br")(17,"br")(18,"br"),t.TgZ(19,"mat-table",5),t.ynx(20,6),t.YNc(21,gt,2,0,"mat-header-cell",7),t.YNc(22,ht,4,4,"mat-cell",8),t.BQk(),t.ynx(23,9),t.YNc(24,_t,2,0,"mat-header-cell",7),t.YNc(25,ft,4,4,"mat-cell",8),t.BQk(),t.ynx(26,10),t.YNc(27,vt,2,0,"mat-header-cell",7),t.YNc(28,bt,3,1,"mat-cell",8),t.BQk(),t.ynx(29,11),t.YNc(30,xt,2,0,"mat-header-cell",7),t.YNc(31,Ct,3,1,"mat-cell",8),t.BQk(),t.ynx(32,12),t.YNc(33,Zt,2,0,"mat-header-cell",7),t.YNc(34,At,4,1,"mat-cell",8),t.BQk(),t.YNc(35,wt,1,0,"mat-header-row",13),t.YNc(36,kt,1,0,"mat-row",14),t.qZA()),2&o&&(t.xp6(19),t.Q6J("dataSource",i.bookedAppointments),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[d.O5,p.rH,g.lW,C.Ye,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.uU],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:50px}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-right:20px}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;cursor:pointer}.join-button[_ngcontent-%COMP%]:hover{min-width:50px;margin-right:10px;font-size:smaller;animation:_ngcontent-%COMP%_heartbeat 1.5s ease-in-out infinite both}@keyframes _ngcontent-%COMP%_heartbeat{0%{transform:scale(1);transform-origin:center center;animation-timing-function:ease-out}10%{transform:scale(.91);animation-timing-function:ease-in}17%{transform:scale(.98);animation-timing-function:ease-out}33%{transform:scale(.87);animation-timing-function:ease-in}45%{transform:scale(1);animation-timing-function:ease-out}}"]})}return n})();function Ot(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.ALo(6,"date"),t.qZA()()),2&n){const e=s.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(2),t.AsE(" ",t.xi3(5,3,"2024-05-01T"+o.doctorBioData.availability_data.start,"HH:mm a")," - ",t.xi3(6,6,"2024-05-01T"+o.doctorBioData.availability_data.end,"HH:mm a")," ")}}let Ut=(()=>{class n{constructor(e,o){this.patientService=e,this.route=o,this.doctorBioData={},this.key=""}ngOnInit(){this.key=this.route.snapshot.paramMap.get("doctorId"),this.patientService.getDoctorProfile(this.key).subscribe(e=>{this.doctorBioData=e,console.log("i am doctor profile data for patient : ",this.doctorBioData)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(x.e),t.Y36(p.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-about"]],decls:48,vars:8,consts:[[1,"container"],[1,"card"],["src","https://img.freepik.com/free-photo/portrait-3d-male-doctor_23-2151107212.jpg","alt","Doctor Avatar",1,"avatar"],[1,"name"],[1,"info"],[1,"material-icons","info-icon"],[1,"availability-table"],[4,"ngFor","ngForOf"],[1,"description"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t._UZ(5,"br")(6,"br"),t.TgZ(7,"div",4)(8,"i",5),t._uU(9,"school"),t.qZA(),t.TgZ(10,"p")(11,"b"),t._uU(12,"Qualification:"),t.qZA(),t._uU(13),t.qZA()(),t.TgZ(14,"div",4)(15,"i",5),t._uU(16,"work"),t.qZA(),t.TgZ(17,"p")(18,"b"),t._uU(19,"Experience:"),t.qZA(),t._uU(20),t.qZA()(),t.TgZ(21,"div",4)(22,"i",5),t._uU(23,"category"),t.qZA(),t.TgZ(24,"p")(25,"b"),t._uU(26,"Specialization:"),t.qZA(),t._uU(27),t.qZA()(),t.TgZ(28,"div",4)(29,"i",5),t._uU(30,"schedule"),t.qZA(),t.TgZ(31,"b"),t._uU(32,"Availability:"),t.qZA(),t.TgZ(33,"table",6)(34,"tbody"),t.YNc(35,Ot,7,9,"tr",7),t.qZA()()(),t.TgZ(36,"div",4)(37,"i",5),t._uU(38,"attach_money"),t.qZA(),t.TgZ(39,"p")(40,"b"),t._uU(41,"Consultation Fee:"),t.qZA(),t._uU(42),t.qZA()(),t.TgZ(43,"div",8)(44,"b"),t._uU(45,"Description:"),t.qZA(),t.TgZ(46,"p"),t._uU(47),t.qZA()()()()),2&o&&(t.xp6(4),t.Oqu(i.doctorBioData.full_name),t.xp6(9),t.AsE(" MD, ",i.doctorBioData.specialization," - ",i.doctorBioData.qualification,""),t.xp6(7),t.hij(" ",i.doctorBioData.experience_years," years"),t.xp6(7),t.hij(" ",i.doctorBioData.specialization,""),t.xp6(8),t.Q6J("ngForOf",i.doctorBioData.availability_data.days),t.xp6(7),t.hij(" pkr ",i.doctorBioData.consultation_fees," per session"),t.xp6(5),t.Oqu(i.doctorBioData.summary))},dependencies:[d.sg,d.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.card[_ngcontent-%COMP%]{width:400px;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-bottom:20px}.name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:10px}.info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.info-icon[_ngcontent-%COMP%]{margin-right:10px}"]})}return n})();var Pt=r(6385),qt=r(2599);function Dt(n,s){1&n&&t._UZ(0,"mat-divider")}const St=function(n){return{done:n}};function Nt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item"),t.YNc(1,Dt,1,0,"mat-divider",3),t.TgZ(2,"mat-slide-toggle",5),t.NdJ("change",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggle(a))}),t.TgZ(3,"span",6),t._uU(4),t.qZA()(),t.TgZ(5,"button",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.removeTask(a))}),t.TgZ(6,"mat-icon",8),t._uU(7,"delete"),t.qZA()()()}if(2&n){const e=s.$implicit,o=s.index;t.xp6(1),t.Q6J("ngIf",0!=o),t.xp6(1),t.Q6J("checked",!!e.done),t.xp6(1),t.Q6J("ngClass",t.VKq(4,St,e.done)),t.xp6(1),t.Oqu(e.text)}}function Ft(n,s){if(1&n&&(t.TgZ(0,"mat-card")(1,"mat-list"),t.YNc(2,Nt,8,6,"mat-list-item",4),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tasks)}}let It=(()=>{class n{constructor(){this.tasks=[]}addTask(e){""!==e&&this.tasks.push({text:e,done:!1})}removeTask(e){this.tasks.splice(this.tasks.indexOf(e),1)}toggle(e){e.done=!e.done}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-todo"]],decls:7,vars:2,consts:[["matInput","","placeholder","Add new task"],["newtaskinput",""],["mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["color","primary",3,"checked","change"],[3,"ngClass"],["matTooltip","Delete task","matTooltipPosition","above","mat-icon-button","",3,"click"],["aria-label","Example icon-button with a heart icon"]],template:function(o,i){if(1&o){const a=t.EpF();t.TgZ(0,"mat-form-field"),t._UZ(1,"input",0,1),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(2);return i.addTask(u.value),t.KtG(u.value="")}),t._uU(4,"Add"),t.qZA(),t._UZ(5,"br"),t.YNc(6,Ft,3,1,"mat-card",3)}if(2&o){const a=t.MAs(2);t.xp6(3),t.Q6J("disabled",""==a.value),t.xp6(3),t.Q6J("ngIf",i.tasks.length>0)}},dependencies:[d.mk,d.sg,d.O5,y.a8,v.Hw,g.lW,g.RK,Pt.d,b.i$,b.Tg,T.KE,S.Nt,qt.Rr]})}return n})(),Jt=(()=>{class n{constructor(e,o){this.doctorService=e,this.router=o}updateDoctorForm(){this.router.navigate(["/doctor/form"],{queryParams:{updateMode:!0}})}updateDoctorProfile(){this.router.navigate(["/account/Sign-up"],{queryParams:{updateMode:!0}})}onDeleteDoctor(){this.doctorService.deleteDoctor().subscribe(e=>{console.log("doctor deleted successfully",e)})}onDeleteDoctorForm(){this.doctorService.delDocForm().subscribe(e=>{console.log("doctor form deleted successfully",e)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.O),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],decls:25,vars:0,consts:[[1,"container"],[1,"parent"],[1,"card"],[1,"button-container"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"b"),t._uU(3,"Update Personal Information"),t.qZA()(),t.TgZ(4,"mat-card",2)(5,"div",3)(6,"button",4),t.NdJ("click",function(){return i.updateDoctorProfile()}),t.TgZ(7,"mat-icon"),t._uU(8,"person"),t.qZA(),t._uU(9," Update Personal Information "),t.qZA()(),t.TgZ(10,"div",3)(11,"button",5),t.NdJ("click",function(){return i.updateDoctorForm()}),t.TgZ(12,"mat-icon"),t._uU(13,"edit"),t.qZA(),t._uU(14," Update Medical Form "),t.qZA()(),t.TgZ(15,"div",3)(16,"button",6),t.NdJ("click",function(){return i.onDeleteDoctor()}),t.TgZ(17,"mat-icon"),t._uU(18,"delete"),t.qZA(),t._uU(19," Delete Account "),t.qZA()(),t.TgZ(20,"div",3)(21,"button",6),t.NdJ("click",function(){return i.onDeleteDoctorForm()}),t.TgZ(22,"mat-icon"),t._uU(23,"delete_outline"),t.qZA(),t._uU(24," Delete Medical Form "),t.qZA()()()())},dependencies:[y.a8,v.Hw,g.lW],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.parent[_ngcontent-%COMP%]{max-width:400px;width:100%;margin-bottom:20px}.card[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;border-radius:10px;box-shadow:0 2px 10px #0000001a}.button-container[_ngcontent-%COMP%]{margin-bottom:10px}.mat-raised-button[_ngcontent-%COMP%]{width:100%;text-transform:none}"]})}return n})();var Yt=r(9947);const Ht=["chatContainer"];function Et(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.savePatId(a.id))}),t.TgZ(1,"div",21),t._UZ(2,"img",22),t.TgZ(3,"h3"),t._uU(4),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw();t.ekj("selected",e.id===o.selectedAppointmentId),t.xp6(2),t.MGl("src","assets/avatars/",e.id,".jpg",t.LSH),t.xp6(2),t.Oqu(e.name)}}function Qt(n,s){if(1&n&&(t.TgZ(0,"div",25)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.message)}}function jt(n,s){if(1&n&&(t.TgZ(0,"div",23),t.YNc(1,Qt,3,1,"div",24),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.message)}}function Bt(n,s){if(1&n&&(t.TgZ(0,"div",26)(1,"div",25)(2,"p"),t._uU(3),t.qZA()()()),2&n){const e=s.$implicit;t.xp6(3),t.Oqu(e)}}function Lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"footer",27)(1,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sendEmoji())}),t._uU(2," \u{1f44d} "),t.qZA(),t.TgZ(3,"input",29),t.NdJ("keydown.enter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sendMessage())})("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.newMessage=i)}),t.qZA(),t.TgZ(4,"button",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sendMessage())}),t._uU(5,"Send"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.newMessage)}}const zt=[{path:"",component:I},{path:"dashboard",component:Y},{path:"form",component:$},{path:"videoCall",component:F},{path:"videoCall/:patientId/:doctorId",component:F},{path:"appointments",component:Mt},{path:"about/:doctorId",component:Ut},{path:"chat",component:(()=>{class n{constructor(e,o,i,a){this.authService=e,this.doctorService=o,this.patientService=i,this.zone=a,this.newMessage="",this.messages=[],this.bookedAppointments=[],this.pat_id="",this.chats=[],this.profilePicture="",this.selectedAppointmentId=null,this.tokeny=""}ngOnInit(){this.onbookedAppointments()}onbookedAppointments(){this.doctorService.getbookedAppointments().subscribe(e=>{const o=Array.from(e.reduce((i,a)=>(i.set(a.patient,{id:a.patient,name:a.patient_name}),i),new Map).values());console.log("Unique appointments:",e),this.bookedAppointments=o})}savePatId(e){this.chatSocket&&this.chatSocket.readyState===WebSocket.OPEN&&this.chatSocket.close(),this.selectedAppointmentId=e,this.pat_id=e,this.getChatHistory(),this.createWebSocketConnection()}createWebSocketConnection(){if(this.chatSocket&&this.chatSocket.readyState===WebSocket.OPEN)return;const e=localStorage.getItem("token");this.tokeny=e,this.chatSocket=new WebSocket(`${Yt.N.testApi}/${this.pat_id}/?token= ${e}`),this.chatSocket.onopen=o=>{console.log("Chat socket successfully connected.")},this.chatSocket.onclose=o=>{console.log("Chat socket closed unexpectedly")},this.chatSocket.onmessage=o=>{const a=JSON.parse(o.data).message;a.includes("joined")&&(this.messages=[]),this.messages.push(a),console.log("Message received:",a,this.messages),this.scrollToBottom()}}scrollToBottom(){this.zone.runOutsideAngular(()=>{setTimeout(()=>{try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch{}})})}sendEmoji(){this.sendMessage("\u{1f44d}")}disconnect(){this.chatSocket&&this.chatSocket.close()}ngOnDestroy(){this.disconnect(),console.log("websocket connectiion closed")}getChatHistory(){this.patientService.getChatHistory({patient:this.pat_id}).subscribe(o=>{this.chats=o})}sendMessage(e=null){e&&(this.newMessage=e),this.newMessage.trim()&&(this.chatSocket.send(this.newMessage),this.newMessage=""),this.scrollToBottom()}removeMessage(e){const o=this.messages.indexOf(e);-1!==o&&this.messages.splice(o,1)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(f.e),t.Y36(h.O),t.Y36(x.e),t.Y36(t.R0b))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat1"]],viewQuery:function(o,i){if(1&o&&t.Gf(Ht,5),2&o){let a;t.iGM(a=t.CRH())&&(i.chatContainer=a.first)}},decls:22,vars:4,consts:[[1,"container"],[1,"sidebar"],[1,"sidebar-header"],[1,"icon-button"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["d","M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"],["d","m15 5 4 4"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.3-4.3"],["type","search","placeholder","Search messages...",1,"search-input"],[1,"contact-list"],["class","contact-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"chat-section"],[1,"chat-main"],["chatContainer",""],["class","message received",4,"ngFor","ngForOf"],["class","message sent",4,"ngFor","ngForOf"],["class","chat-footer",4,"ngIf"],[1,"contact-card",3,"click"],[1,"contact-card-content"],["alt","profile picture",3,"src"],[1,"message","received"],["class","message-content",4,"ngIf"],[1,"message-content"],[1,"message","sent"],[1,"chat-footer"],[1,"icon-button",2,"font-size","1.5rem","cursor","pointer",3,"click"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModel","keydown.enter","ngModelChange"],[1,"send-button",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"aside",1)(2,"div",2)(3,"h2"),t._uU(4,"Messages"),t.qZA(),t.TgZ(5,"button",3),t.O4$(),t.TgZ(6,"svg",4),t._UZ(7,"path",5)(8,"path",6),t.qZA()()(),t.kcU(),t.TgZ(9,"div",7),t.O4$(),t.TgZ(10,"svg",8),t._UZ(11,"circle",9)(12,"path",10),t.qZA(),t.kcU(),t._UZ(13,"input",11),t.qZA(),t.TgZ(14,"div",12),t.YNc(15,Et,5,4,"div",13),t.qZA()(),t.TgZ(16,"section",14)(17,"main",15,16),t.YNc(19,jt,2,1,"div",17),t.YNc(20,Bt,4,1,"div",18),t.qZA(),t.YNc(21,Lt,6,1,"footer",19),t.qZA()()),2&o&&(t.xp6(15),t.Q6J("ngForOf",i.bookedAppointments),t.xp6(4),t.Q6J("ngForOf",i.chats),t.xp6(1),t.Q6J("ngForOf",i.messages),t.xp6(1),t.Q6J("ngIf",i.selectedAppointmentId))},dependencies:[d.sg,d.O5,l.Fj,l.JJ,l.On],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;background-color:#fff}.container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:25%;border-right:1px solid #e0e0e0;padding:16px}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.icon-button[_ngcontent-%COMP%]{background:none;border:none;display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;transition:background .3s}.icon[_ngcontent-%COMP%]{width:24px;height:24px}.search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:16px}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:8px;transform:translateY(-50%);width:20px;height:20px;color:#9e9e9e}.search-input[_ngcontent-%COMP%]{width:100%;padding:8px 8px 8px 36px;border:1px solid #e0e0e0;border-radius:4px}.contact-list[_ngcontent-%COMP%]{overflow-y:auto}.contact-card[_ngcontent-%COMP%]{border:.6px solid #e0e0e0;border-radius:5px;padding:16px;margin-bottom:10px;transition:background .3s;display:flex;align-items:center;background-color:#f0f0f0;cursor:pointer}.contact-card.selected[_ngcontent-%COMP%]{background-color:#f0f0f0;border-right:4px solid #00BFA5;padding-right:5px}.contact-card[_ngcontent-%COMP%]:hover{background-color:#fff}.contact-card-content[_ngcontent-%COMP%]{display:flex;align-items:center}.contact-card-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin-right:10px}.contact-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin:0}.chat-section[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.chat-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;gap:16px}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:24px}.contact-avatar[_ngcontent-%COMP%]{position:relative;width:40px;height:40px;border-radius:50%;background-color:#e0e0e0;display:flex;align-items:center;justify-content:center}.status-indicator[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:12px;height:12px;border-radius:50%;background-color:#4caf50}.avatar-initial[_ngcontent-%COMP%]{font-size:18px;color:#fff}.status-text[_ngcontent-%COMP%]{display:block;font-size:12px;color:#4caf50}.chat-main[_ngcontent-%COMP%]{flex-grow:1;padding:16px;overflow-y:auto}.chat-main[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.message[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.message-content[_ngcontent-%COMP%]{padding:8px 12px;border-radius:8px;max-width:100%}.received[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f0f0f0}.sent[_ngcontent-%COMP%]{justify-content:flex-end}.sent[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.chat-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e0e0e0;display:flex;gap:8px;align-items:center}.message-input[_ngcontent-%COMP%]{flex-grow:1;padding:8px;border:1px solid #e0e0e0;border-radius:4px}.send-button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#2196f3;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background .3s}.send-button[_ngcontent-%COMP%]:hover{background-color:#1976d2}"]})}return n})()},{path:"todo",component:It},{path:"settings",component:Jt}];let Rt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(zt),p.Bz]})}return n})();var Vt=r(9432);let $t=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.ez,Rt,Vt.q,N.hx,M.Ns.forRoot({echarts:()=>r.e(177).then(r.bind(r,4177))})]})}return n})()}}]);