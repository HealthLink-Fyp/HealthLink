"use strict";(self.webpackChunkHealth360Front=self.webpackChunkHealth360Front||[]).push([[214],{6214:(Gt,w,r)=>{r.r(w),r.d(w,{DashboardsModule:()=>Rt});var d=r(6814),p=r(1865),t=r(5879);let I=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboards"]],decls:0,vars:0,template:function(n,i){}})}return o})();var f=r(9327),h=r(7503),v=r(617),g=r(2296),C=r(1274),b=r(9038),x=r(2651),U=r(7008);let J=(()=>{class o{constructor(e){this.doctorService=e,this.doctorData={},this.totalAppointments=0,this.uniquePatientCount=0,this.option={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:this.uniquePatientCount,name:"Total Patients"}]}]},this.updateChartData()}ngOnInit(){this.doctorService.getDoctor().subscribe(e=>{this.doctorData=e}),this.doctorService.getbookedAppointments().subscribe(e=>{this.totalAppointments=e.length,this.uniquePatientCount=[...new Set(e.map(n=>n.patient))].length,this.updateChartData()})}updateChartData(){this.option.series&&Array.isArray(this.option.series)&&this.option.series.length>0&&(this.option.series[0].data=[{value:this.totalAppointments,name:"Total Appointments"},{value:this.uniquePatientCount,name:"Unique Patients"}])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.O))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-doc"]],decls:70,vars:5,consts:[[1,"breadcrumb"],[2,"position","relative","left","-7px","top","3px"],[1,"bcrumb"],[1,"welcomediv"],[1,"wcard"],["lazyLoad","","src","https://www.einfosoft.com/templates/admin/cliniva/source/light/assets/images/pages/welcome.png","alt","",1,"wimage"],[1,"wname"],[1,"metricCards"],[1,"metric"],[1,"mcard"],["lazyLoad","","src","https://static.vecteezy.com/system/resources/thumbnails/014/495/856/small/hand-injury-icon-outline-style-vector.jpg",1,"mimage"],[1,"mname"],[1,"mscore"],[1,"mstat"],["lazyLoad","","src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSMxH5C9m86wP6ThD7Fkleg6rfUZY4FgqSAb0-ZtGmH5Q&s",1,"mimage"],["lazyLoad","","src","https://play-lh.googleusercontent.com/umhQAisu6vYe9oEiNSqr02H2nkT3iPtgYFye2E-VKZraV9Wcsk_kPSln7KnHiDRXHXo=w240-h480-rw",1,"mimage"],["lazyLoad","","src","https://static.vecteezy.com/system/resources/thumbnails/021/495/923/small_2x/internet-explorer-browser-logo-brand-symbol-design-software-illustration-free-vector.jpg",1,"mimage"],[1,"vmetrices"],[1,"barparent"],[1,"barchart"],["echarts","",3,"options"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-icon",1),t._uU(2,"home"),t.qZA(),t.TgZ(3,"h1"),t._uU(4,">"),t.qZA(),t.TgZ(5,"p",2),t._uU(6,"Dashboard"),t.qZA()(),t.TgZ(7,"div",3)(8,"div",4),t._UZ(9,"img",5),t.TgZ(10,"div")(11,"h4"),t._uU(12," Welcome back "),t.TgZ(13,"div",6),t._uU(14),t.qZA()(),t.TgZ(15,"p"),t._uU(16," We would like to take this opportunity to welcome you to our practice and to thank you for choosing our physicians to participate in your healthcare. We look forward to providing you with personalized, comprehensive health care focusing on wellness and prevention. "),t.qZA()()()(),t.TgZ(17,"div",7)(18,"div",8)(19,"div",9),t._UZ(20,"img",10),t.TgZ(21,"div")(22,"h4",11),t._uU(23," Patients "),t.TgZ(24,"div",12),t._uU(25),t.qZA()(),t.TgZ(26,"p",13)(27,"mat-icon"),t._uU(28,"trending_up"),t.qZA(),t._uU(29,"10% Higher Then Last Month "),t.qZA()()()(),t.TgZ(30,"div",8)(31,"div",9),t._UZ(32,"img",14),t.TgZ(33,"div")(34,"h4",11),t._uU(35," Appointments "),t.TgZ(36,"div",12),t._uU(37),t.qZA()(),t.TgZ(38,"p",13)(39,"mat-icon"),t._uU(40,"trending_up"),t.qZA(),t._uU(41,"10% Higher Then Last Month "),t.qZA()()()(),t.TgZ(42,"div",8)(43,"div",9),t._UZ(44,"img",15),t.TgZ(45,"div")(46,"h4",11),t._uU(47," Blood Pressure "),t.TgZ(48,"div",12),t._uU(49,"110/70"),t.qZA()(),t.TgZ(50,"p",13)(51,"mat-icon"),t._uU(52,"trending_up"),t.qZA(),t._uU(53,"10% Higher Then Last Month "),t.qZA()()()(),t.TgZ(54,"div",8)(55,"div",9),t._UZ(56,"img",16),t.TgZ(57,"div")(58,"h4",11),t._uU(59," Hooked Meeting "),t.TgZ(60,"div",12),t._uU(61),t.qZA()(),t.TgZ(62,"p",13)(63,"mat-icon"),t._uU(64,"trending_up"),t.qZA(),t._uU(65,"10% Higher Then Last Month "),t.qZA()()()()(),t.TgZ(66,"div",17)(67,"div",18)(68,"div",19),t._UZ(69,"div",20),t.qZA()()()),2&n&&(t.xp6(14),t.Oqu(i.doctorData.full_name),t.xp6(11),t.Oqu(i.uniquePatientCount),t.xp6(12),t.Oqu(i.totalAppointments),t.xp6(24),t.Oqu(i.totalAppointments),t.xp6(8),t.Q6J("options",i.option))},dependencies:[v.Hw,U._w],styles:[".welcomediv[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.wcard[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgb(242,244,249);border-radius:10px;box-shadow:#b7c0ce33 0 0 10px;display:flex;flex-direction:row;align-items:center;margin:21px 21px 10px}.wimage[_ngcontent-%COMP%]{width:100%!important}.wname[_ngcontent-%COMP%]{color:#2196f3;font-size:25px;font-weight:500;grid-area:auto;letter-spacing:.5px;line-height:24px;padding:4px 0 0}.bcrumb[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;color:#444;font-size:20px;position:relative;left:6px;top:6px}.breadcrumb[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;left:64px;top:20px}.metricCards[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;margin:30px}.metric[_ngcontent-%COMP%] > .mcard[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgb(242,244,249);border-radius:10px;box-shadow:#b7c0ce33 0 0 10px;display:flex;flex-direction:row;align-items:center;position:relative}.mname[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;color:#212529;font-size:16px;line-height:28px;position:relative;left:59px;top:1px}.mscore[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:700;color:#4caf50;font-size:16px;line-height:28px;position:relative;left:63px;top:4px}.mstat[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:400;color:#212529;font-size:12px;line-height:20px;position:relative;left:-34px;top:11px}.mimage[_ngcontent-%COMP%]{max-width:100%;height:80px;position:relative;left:12px;top:-16px}.barparent[_ngcontent-%COMP%]{margin:100px;width:100%;height:100%}"]})}return o})(),Y=(()=>{class o{constructor(e,n){this.doctorService=e,this.authService=n,this.doctorData={}}ngOnInit(){this.doctorService.getDoctor().subscribe(e=>{this.doctorData=e})}logout(){this.authService.logout().subscribe(()=>{this.authService.accessToken="",f.e.authEmitter.emit(!1)})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.O),t.Y36(f.e))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dsidenav"]],decls:55,vars:1,consts:[[1,"toolbar"],["mat-icon-button","",3,"click"],["routerLink","/patient/docsearch",1,"nav-link"],["routerLink","/patient/medicalStore",1,"nav-link"],["routerLink","/patient/labTests",1,"nav-link"],[1,"whole"],[1,"profile"],[1,"pname"],["src","https://png.pngtree.com/png-vector/20230516/ourmid/pngtree-anxious-doctor-see-medical-report-and-thinking-confused-her-hand-in-vector-png-image_7099159.png","alt","Avatar",1,"avatar"],["autosize",""],["opened","true","mode","side","position","start"],["drawer",""],["routerLink","card","mat-button",""],["routerLink","/doctor/appointments","mat-button",""],["routerLink","/doctor/chat","mat-button",""],["routerLink","/doctor/settings","mat-button",""],["mat-button","","routerLink","/",3,"click"],[1,"bodie"]],template:function(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"div")(1,"mat-toolbar",0)(2,"h1")(3,"button",1),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(25);return t.KtG(u.toggle())}),t.TgZ(4,"mat-icon"),t._uU(5,"menu"),t.qZA()()(),t.TgZ(6,"h1"),t._uU(7,"HealthLink 360"),t.qZA(),t.TgZ(8,"h1")(9,"a",2),t._uU(10,"Find Doctors"),t.qZA()(),t.TgZ(11,"h1")(12,"a",3),t._uU(13,"Medicines"),t.qZA()(),t.TgZ(14,"h1")(15,"a",4),t._uU(16,"Lab Tests"),t.qZA()(),t.TgZ(17,"h1")(18,"div",5)(19,"div",6)(20,"h2",7),t._uU(21),t.qZA(),t._UZ(22,"img",8),t.qZA()()()()(),t.TgZ(23,"mat-drawer-container",9)(24,"mat-drawer",10,11)(26,"mat-nav-list")(27,"mat-list-item")(28,"button",12)(29,"mat-icon"),t._uU(30,"dashboard"),t.qZA(),t._uU(31," Dashboard"),t.qZA()(),t.TgZ(32,"mat-list-item")(33,"button",13)(34,"mat-icon"),t._uU(35,"assignment"),t.qZA(),t._uU(36," Appointments"),t.qZA()(),t.TgZ(37,"mat-list-item")(38,"button",14)(39,"mat-icon"),t._uU(40," chat"),t.qZA(),t._uU(41," Chat"),t.qZA()(),t.TgZ(42,"mat-list-item")(43,"button",15)(44,"mat-icon"),t._uU(45,"settings"),t.qZA(),t._uU(46," Settings"),t.qZA()(),t.TgZ(47,"mat-list-item")(48,"button",16),t.NdJ("click",function(){return i.logout()}),t.TgZ(49,"mat-icon"),t._uU(50,"power_settings_new"),t.qZA(),t._uU(51," Logout"),t.qZA()()()(),t.TgZ(52,"mat-drawer-content")(53,"div",17),t._UZ(54,"app-doc"),t.qZA()()()}2&n&&(t.xp6(21),t.hij(" ",i.doctorData.full_name,""))},dependencies:[p.rH,v.Hw,g.lW,g.RK,C.Ye,b.Hk,b.Tg,x.jA,x.kh,x.LW,J],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;background-color:#fff;padding:10px;border-bottom:1px solid #ccc}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-right:20px}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:nth-last-child(1){margin-left:auto}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.bodie[_ngcontent-%COMP%]{background-color:#f0f3fb}.avatar[_ngcontent-%COMP%]{vertical-align:middle;width:50px;height:50px;border-radius:50%;position:relative;left:11px;top:-3px}.whole[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]{display:flex;flex-direction:row}.pname[_ngcontent-%COMP%]{position:relative;left:0;top:12px}"]})}return o})();var l=r(6223);const H=[["general_practice","General Practice"],["child_care","Child Care"],["women_health","Women Health"],["bone_joint_care","Bone & Joint Care"],["heart_care","Heart Care"],["skin_care","Skin Care"],["eye_care","Eye Care"],["dental_care","Dental Care"],["mental_health","Mental Health"],["brain_nervous_system_care","Brain & Nervous System Care"],["digestive_health","Digestive Health"],["urinary_tract_health","Urinary Tract Health"],["cancer_care","Cancer Care"],["ear_nose_throat_care","Ear, Nose & Throat Care"],["hormone_health","Hormone Health"],["joint_health","Joint Health"],["allergy_immune_system_care","Allergy & Immune System Care"],["lung_respiratory_health","Lung & Respiratory Health"],["kidney_health","Kidney Health"],["physical_therapy","Physical Therapy"]],Q=[["mbbs","MBBS"],["bds","BDS"],["md","MD"]],E=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];var B=r(2212);function j(o,s){if(1&o&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e[0]),t.xp6(1),t.hij(" ",e[1]," ")}}function R(o,s){if(1&o&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e[0]),t.xp6(1),t.hij(" ",e[1]," ")}}function V(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"input",20),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onChange(i))}),t.qZA(),t.TgZ(2,"label"),t._uU(3),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(2),t.Oqu(e)}}function z(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleUpdateMode())}),t._uU(1,"Cancel"),t.qZA()}}let $=(()=>{class o{constructor(e,n,i,a,c,u){this.formBuilder=e,this.doctorService=n,this.authService=i,this.router=a,this.route=c,this.notifyService=u,this.message="",this.isUpdateMode=!1,this.SPECIALIZATION_CHOICES=H,this.QUALIFICATION_CHOICES=Q,this.availableDays=E}ngOnInit(){this.route.queryParams.subscribe(e=>{this.isUpdateMode=e.updateMode||!1,this.createForm(),this.isUpdateMode&&this.getDoctorDataFields()})}createForm(){this.form=this.formBuilder.group({specialization:"",qualification:"",experience_years:"",city:"",available_timings:"",consultation_fees:"",availability_data:this.formBuilder.group({days:this.formBuilder.array([]),start:"",end:""}),summary:"",wait_time:""})}onChange(e){!function L(o,s){const e=o.target.value,n=o.target.checked,i=s.get("availability_data.days");if(n)i.push(new l.NI(e));else{let a=0;i.controls.forEach(c=>{c.value==n&&i.removeAt(a),a++})}}(e,this.form)}submit(){this.doctorService[this.isUpdateMode?"updateDoctorProfile":"register"](this.form.getRawValue()).subscribe(n=>{console.log(n),this.notifyService.showSuccess("Successfully Created Doctor Profile!"),this.router.navigate(["/doctor/dashboard"])},n=>{console.error(n),this.notifyService.showError("Error! Please Fill Out Form.")})}Done(){this.router.navigate(["/doctor/dashboard"])}getDoctorDataFields(){this.doctorService.getDoctor().subscribe(e=>this.form.patchValue(e))}toggleUpdateMode(){this.isUpdateMode=!this.isUpdateMode}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.qu),t.Y36(h.O),t.Y36(f.e),t.Y36(p.F0),t.Y36(p.gz),t.Y36(B.c))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dform"]],decls:54,vars:6,consts:[[1,"bounce-in-left"],[1,"card"],[3,"formGroup","submit"],["formControlName","specialization"],[3,"value",4,"ngFor","ngForOf"],["formControlName","qualification"],["type","text","formControlName","experience_years"],["type","text","formControlName","city"],["type","time","formControlName","available_timings"],["formGroupName","availability_data"],[4,"ngFor","ngForOf"],["type","time","formControlName","start"],["type","time","formControlName","end"],["type","number","formControlName","consultation_fees"],["type","text","formControlName","summary"],["type","number","formControlName","wait_time"],["type","submit"],[3,"click"],[3,"click",4,"ngIf"],[3,"value"],["type","checkbox",3,"value","change"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("submit",function(){return i.submit()}),t.TgZ(3,"h1"),t._uU(4,"Doctor Form:"),t.qZA(),t.TgZ(5,"div")(6,"label"),t._uU(7,"Please select your specialization"),t.qZA(),t.TgZ(8,"select",3),t.YNc(9,j,2,2,"option",4),t.qZA()(),t.TgZ(10,"div")(11,"label"),t._uU(12,"Please select your qualification"),t.qZA(),t.TgZ(13,"select",5),t.YNc(14,R,2,2,"option",4),t.qZA()(),t.TgZ(15,"div")(16,"label"),t._uU(17,"Please tell your experience years:"),t.qZA(),t._UZ(18,"input",6),t.qZA(),t.TgZ(19,"div")(20,"label"),t._uU(21,"Please tell your city:"),t.qZA(),t._UZ(22,"input",7),t.qZA(),t.TgZ(23,"div")(24,"label"),t._uU(25,"Please tell your available timings:"),t.qZA(),t._UZ(26,"input",8),t.qZA(),t.TgZ(27,"div",9),t.YNc(28,V,4,2,"div",10),t.TgZ(29,"div")(30,"label"),t._uU(31,"Available Start Time:"),t.qZA(),t._UZ(32,"input",11),t.qZA(),t.TgZ(33,"div")(34,"label"),t._uU(35,"Available end Time:"),t.qZA(),t._UZ(36,"input",12),t.qZA()(),t.TgZ(37,"div")(38,"label"),t._uU(39,"Please tell us your consultation fees:"),t.qZA(),t._UZ(40,"input",13),t.qZA(),t.TgZ(41,"div")(42,"label"),t._uU(43,"Please tell us a little about yourself:"),t.qZA(),t._UZ(44,"input",14),t.qZA(),t.TgZ(45,"div")(46,"label"),t._uU(47,"Please set your wait time:"),t.qZA(),t._UZ(48,"input",15),t.qZA(),t.TgZ(49,"button",16),t._uU(50),t.qZA()(),t.TgZ(51,"button",17),t.NdJ("click",function(){return i.Done()}),t._uU(52,"Already filled"),t.qZA(),t.YNc(53,z,2,0,"button",18),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("ngForOf",i.SPECIALIZATION_CHOICES),t.xp6(5),t.Q6J("ngForOf",i.QUALIFICATION_CHOICES),t.xp6(14),t.Q6J("ngForOf",i.availableDays),t.xp6(22),t.Oqu(i.isUpdateMode?"Update":"Submit"),t.xp6(3),t.Q6J("ngIf",i.isUpdateMode))},dependencies:[d.sg,d.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u,l.x0],styles:['body[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;display:flex;justify-content:center;align-items:center;background-color:#f0f0f0}.card[_ngcontent-%COMP%]{width:400px;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;background-color:#fff;background-image:url(https://img.freepik.com/free-vector/simple-blue-blank-background-vector-business_53876-169282.jpg);background-repeat:no-repeat;background-size:cover;left:419px;position:relative;right:-419px;top:5px}.mat-mdc-card-title[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.bounce-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-in-left 1.1s both}@keyframes _ngcontent-%COMP%_bounce-in-left{0%{transform:translate(-600px);animation-timing-function:ease-in;opacity:0}38%{transform:translate(0);animation-timing-function:ease-out;opacity:1}55%{transform:translate(-68px);animation-timing-function:ease-in}72%{transform:translate(0);animation-timing-function:ease-out}81%{transform:translate(-28px);animation-timing-function:ease-in}90%{transform:translate(0);animation-timing-function:ease-out}95%{transform:translate(-8px);animation-timing-function:ease-in}to{transform:translate(0);animation-timing-function:ease-out}}']})}return o})();var M=r(9193),O=r(7734),G=r(5222),_=r(7700),W=r(2939),q=r(1551),P=r(1901),D=r(3858),K=r(9773),T=r(9285),S=r(2032);let X=(()=>{class o{constructor(e,n,i,a,c,u,A){this.dialogRef=e,this.data=n,this._snackBar=i,this.service=a,this.CallService=c,this.keyService=u,this.imageCaptureService=A,this.transcription="",this.service.init()}ngOnInit(){this.CallService.peerIdGet().subscribe(e=>{console.log("i m getting the peer id in dialog component"),this.data.peerId=e.peer_id})}startService(){this.service.start()}showCopiedSnackBar(){this._snackBar.open("Peer ID Copied!","Hurrah",{duration:1e3,horizontalPosition:"center",verticalPosition:"top"})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.so),t.Y36(_.WI),t.Y36(W.ux),t.Y36(q.U),t.Y36(P.M),t.Y36(D.F),t.Y36(K.D))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dialog"]],decls:10,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",1,"hidden-input",3,"ngModel","disabled","ngModelChange"],["mat-dialog-actions",""],["mat-raised-button","",3,"mat-dialog-close","click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Call Info"),t.qZA(),t.TgZ(2,"div",1)(3,"mat-form-field")(4,"mat-label"),t._uU(5),t.qZA(),t.TgZ(6,"input",2),t.NdJ("ngModelChange",function(c){return i.data.peerId=c}),t.qZA()()(),t.TgZ(7,"div",3)(8,"button",4),t.NdJ("click",function(){return i.startService()}),t._uU(9,"Ok"),t.qZA()()),2&n&&(t.xp6(5),t.Oqu(i.data.joinCall?"Meeting started":"Patient Notified"),t.xp6(1),t.Q6J("ngModel",i.data.peerId)("disabled",!i.data.joinCall),t.xp6(2),t.Q6J("mat-dialog-close",i.data.peerId))},dependencies:[g.lW,T.KE,T.hX,l.Fj,l.JJ,l.On,S.Nt,_.ZT,_.uh,_.xY,_.H8],styles:[".hidden-input[_ngcontent-%COMP%]{display:none}"]})}return o})();var Z=r(6978),y=r(5195),N=r(4747);const tt=["localVideo"],et=["remoteVideo"];function ot(o,s){if(1&o&&t._UZ(0,"img",31),2&o){const e=t.oxw().$implicit;t.s9C("src",e.past_records,t.LSH)}}function nt(o,s){if(1&o&&(t.TgZ(0,"a",32),t._UZ(1,"i",33),t._uU(2),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("href",e.past_records,t.LSH),t.xp6(2),t.hij(" ",n.getFileExtension(e.past_records)," ")}}function it(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ot,1,1,"img",29),t.YNc(2,nt,3,2,"a",30),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.past_records&&n.isImage(e.past_records)),t.xp6(1),t.Q6J("ngIf",e.past_records&&!n.isImage(e.past_records))}}function at(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,it,3,2,"div",28),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.results)}}function st(o,s){1&o&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Ai is thinking..."),t.qZA(),t._UZ(3,"ngx-skeleton-loader",34),t.qZA())}function rt(o,s){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function ct(o,s){1&o&&(t.TgZ(0,"ul")(1,"div",37)(2,"div",38),t._UZ(3,"ngx-skeleton-loader",39),t.qZA()()())}function lt(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function dt(o,s){1&o&&(t.TgZ(0,"ul")(1,"div",37)(2,"div",38),t._UZ(3,"ngx-skeleton-loader",39),t.qZA()()())}function pt(o,s){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function mt(o,s){1&o&&(t.TgZ(0,"ul")(1,"div",37)(2,"div",38),t._UZ(3,"ngx-skeleton-loader",39),t.qZA()()())}function ut(o,s){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Key Points"),t.qZA(),t.TgZ(3,"ul",35),t.YNc(4,rt,2,1,"li",28),t.qZA(),t.YNc(5,ct,4,0,"ul",10),t.TgZ(6,"div",36)(7,"h2"),t._uU(8,"Follow-up Questions:"),t.qZA(),t.TgZ(9,"div",35),t.YNc(10,lt,2,1,"p",28),t.qZA(),t.YNc(11,dt,4,0,"ul",10),t.qZA(),t.TgZ(12,"h2"),t._uU(13,"Live Possible Causes"),t.qZA(),t.TgZ(14,"ul",35),t.YNc(15,pt,2,1,"li",28),t.qZA(),t.YNc(16,mt,4,0,"ul",10),t.qZA()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.transResponse.key_points),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(5),t.Q6J("ngForOf",e.transResponse.followup_questions),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(4),t.Q6J("ngForOf",e.transResponse.likely_diagnoses),t.xp6(1),t.Q6J("ngIf",e.loading)}}let F=(()=>{class o{goBack(){this.location.back()}constructor(e,n,i,a,c,u,A,Vt,zt,$t){this.dialog=e,this.callService=n,this.route=i,this.transcribeService=a,this.authService=c,this.sharedService=u,this.doctorService=A,this.uploadService=Vt,this.recordsService=zt,this.location=$t,this.localVideo=null,this.remoteVideo=null,this.videoData={peer_id:"",doctor:"",patient:""},this.transResponse="",this.loading=!1,this.fakeData={key_points:["Patient's name: Tripura Amanda Flores","Patient reluctant to share their name","Location unknown"],likely_diagnoses:["Alzehemier 50%","Headache 40%","Hiv 30%"],followup_questions:["Can you provide your date of birth?","Are you experiencing any specific symptoms or health concerns?","Do you have any medical conditions or take any medications regularly?","Can you describe your current location or any recent travel history?"]},this.results=[],this.viewRecords=!1,this.emotions="",this.AllAi=!0,this.notesSave="",this.isCallStarted$=this.callService.isCallStarted$,this.peerId=this.callService.initPeer(),console.log("real peer id is ",this.peerId),this.videoData.peer_id=this.peerId,this.videoData.patient=this.route.snapshot.paramMap.get("patientId"),this.videoData.doctor=this.route.snapshot.paramMap.get("doctorId"),console.log("information to unlock sending peer id in vid ts : ",this.videoData),this.callService.peerIdSend(this.videoData).subscribe(k=>{console.log("the peer id have been sent vid ts.",k),this.sendCallIdToTranscribeService(k.call_id,k.patient)})}uploadFile(e){this.selectedFile=e.target.files[0]}sendFileToBackend(){const n=new FormData;n.append("past_records",this.selectedFile),this.uploadService.uploadFile(n).subscribe(i=>{console.log("File sent to backend:",i)})}sendCallIdToTranscribeService(e,n){this.transcribeService.data.call_id=e,this.transcribeService.data.patient_id=n}isImage(e){const i=this.getFileExtension(e);return["jpg","jpeg","png","gif"].includes(i)}getFileExtension(e){const n=e.split(".");return n[n.length-1]}ngOnInit(){this.sharedService.onResponseAvailable().subscribe(e=>{0===e.key_points.length&&0===e.likely_diagnoses.length&&0===e.followup_questions.length||(this.loading=!0,setTimeout(()=>{this.AllAi=!1,this.transResponse=e,this.loading=!1},5e3))}),this.recordsService.getRecords().subscribe(e=>{this.results=e.results.map(n=>{if(n.past_records&&n.past_records.includes("http://localhost:8000")){const i=window.location.origin.replace("-4200","-8000");n.past_records=n.past_records.replace("http://localhost:8000",i)}return n})}),this.callService.localStream$.pipe((0,O.h)(e=>!!e)).subscribe(e=>{this.localVideo&&(this.localVideo.nativeElement.srcObject=e)}),this.callService.remoteStream$.pipe((0,O.h)(e=>!!e)).subscribe(e=>{this.remoteVideo&&(this.remoteVideo.nativeElement.srcObject=e)})}onSendDocNotes(){this.doctorService.sendNotes({doctor_notes:this.notesSave,patient:this.videoData.patient,doctor:this.videoData.doctor}).subscribe(n=>{console.log("notes sent to backend",this.notesSave)})}ngOnDestroy(){this.callService.destroyPeer()}showModal(e){this.dialog.open(X,{width:"250px",data:e?{peerId:void 0,joinCall:!0}:{peerId:this.peerId,joinCall:!1}}).afterClosed().pipe((0,G.w)(a=>(0,M.of)(e?this.callService.establishMediaCall(a):this.callService.enableCallAnswer()))).subscribe(a=>{})}endCall(){this.callService.closeMediaCall()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.uw),t.Y36(P.M),t.Y36(p.gz),t.Y36(q.U),t.Y36(f.e),t.Y36(D.F),t.Y36(h.O),t.Y36(Z.e),t.Y36(Z.e),t.Y36(d.Ye))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-videocall"]],viewQuery:function(n,i){if(1&n&&(t.Gf(tt,5),t.Gf(et,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.localVideo=a.first),t.iGM(a=t.CRH())&&(i.remoteVideo=a.first)}},decls:58,vars:14,consts:[[1,"child"],[1,"header"],[1,"toolbar"],["src","https://i.ibb.co/NKnJZ5L/download.png","alt","logo","width","35","height","35",2,"background-color","transparent","margin-top","0.25vw","margin-left","0.5vw","margin-right","1.5vw"],[1,"nav-link",3,"click"],["routerLink","/find-doctors",1,"nav-link"],[1,"body"],[1,"row"],[1,"col"],[1,"child2"],[4,"ngIf"],[1,"recordButtons"],["id","recordsButton","mat-raised-button","","color","primary",3,"click"],["id","recordsButton2","mat-raised-button","","color","warn",3,"click"],[1,"middle"],[1,"container-fluid"],[1,"col","text-center"],["id","video-wrapper"],["id","remote-video","poster","./assets/video-placeholder.jpg","autoplay","","playsinline",""],["remoteVideo",""],["id","local-video","autoplay","","playsinline","",3,"muted"],["localVideo",""],[1,"row","p-2"],["mat-raised-button","","color","primary",1,"m-2",3,"disabled","click"],["mat-raised-button","",1,"m-2",3,"disabled","click"],["mat-raised-button","","color","warn",1,"m-2",3,"disabled","click"],["id","trans",1,"child2"],[1,"child3"],[4,"ngFor","ngForOf"],["alt","Past Records","class","image-size",3,"src",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],["alt","Past Records",1,"image-size",3,"src"],["target","_blank",3,"href"],["aria-hidden","true",1,"fa","fa-file-pdf"],["count","10","appearance","line"],[1,"stream-list"],[1,"folloWUP"],[1,"loading"],[1,"item"],["count","5","appearance","line"]],template:function(n,i){1&n&&(t.TgZ(0,"div")(1,"mat-card-content",0)(2,"div",1)(3,"div")(4,"mat-toolbar",2)(5,"h1"),t._UZ(6,"img",3),t.qZA(),t.TgZ(7,"h1")(8,"a",4),t.NdJ("click",function(){return i.goBack()}),t._uU(9,"Back"),t.qZA()(),t.TgZ(10,"h1")(11,"a",5),t._uU(12,"Medicines"),t.qZA()(),t.TgZ(13,"h1")(14,"a",5),t._uU(15,"Lab Tests"),t.qZA()()()(),t._UZ(16,"br"),t.qZA(),t.TgZ(17,"div",6)(18,"div",7)(19,"div",8)(20,"div",9),t._UZ(21,"h1"),t.YNc(22,at,2,1,"div",10),t.qZA(),t.TgZ(23,"div",11)(24,"button",12),t.NdJ("click",function(){return i.viewRecords=!0}),t._uU(25,"Med Records"),t.qZA(),t.TgZ(26,"button",13),t.NdJ("click",function(){return i.viewRecords=!1}),t.TgZ(27,"mat-icon"),t._uU(28,"close"),t.qZA()()()(),t.TgZ(29,"div",8)(30,"div",14)(31,"div",15)(32,"div",7)(33,"div",16)(34,"div",17),t._UZ(35,"video",18,19)(37,"video",20,21),t.qZA()()()(),t.TgZ(39,"div",22)(40,"button",23),t.NdJ("click",function(){return i.showModal(!1)}),t.ALo(41,"async"),t._uU(42,"Start Call"),t.qZA(),t.TgZ(43,"button",24),t.NdJ("click",function(){return i.showModal(!0)}),t.ALo(44,"async"),t._uU(45,"Join Call"),t.qZA(),t.TgZ(46,"button",25),t.NdJ("click",function(){return i.endCall()}),t.ALo(47,"async"),t._uU(48,"End Call"),t.qZA()()()(),t.TgZ(49,"div",8),t.YNc(50,st,4,0,"div",10),t.TgZ(51,"div",26),t.YNc(52,ut,17,6,"div",10),t.qZA()()(),t.TgZ(53,"div",7)(54,"div",8)(55,"div",27),t._UZ(56,"h1"),t._uU(57),t.qZA()()()()()()),2&n&&(t.xp6(22),t.Q6J("ngIf",i.viewRecords),t.xp6(15),t.Q6J("muted",!0),t.xp6(3),t.Q6J("disabled",t.lcZ(41,8,i.isCallStarted$)),t.xp6(3),t.Q6J("disabled",t.lcZ(44,10,i.isCallStarted$)),t.xp6(3),t.Q6J("disabled",!t.lcZ(47,12,i.isCallStarted$)),t.xp6(4),t.Q6J("ngIf",i.AllAi),t.xp6(2),t.Q6J("ngIf",i.transResponse&&(i.transResponse.key_points.length>0||i.transResponse.likely_diagnoses.length>0||i.transResponse.followup_questions.length>0)),t.xp6(5),t.hij(" ",i.emotions," "))},dependencies:[d.sg,d.O5,p.rH,y.dn,v.Hw,g.lW,C.Ye,N.xr,d.Ov],styles:[".toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:nth-last-child(2){margin-left:auto}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:50px;background-color:#fff;box-shadow:0 1px 2px #0000000d,0 1px #0000000d;position:relative;top:12px}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-right:20px}#recordsButton[_ngcontent-%COMP%]{width:10vw;height:2hw;padding:0;margin:0;margin-right:1vw}.recordButtons[_ngcontent-%COMP%]{margin-top:2vw;margin-left:3vw}#recordsButton2[_ngcontent-%COMP%]{width:1vw;height:1hw;margin-left:10vw;margin:0}#recordsButton2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;left:4px;top:4x}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;cursor:pointer}.parent[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.child[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:1em}.header[_ngcontent-%COMP%]{order:-1}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.row[_ngcontent-%COMP%]{display:flex}div.col[_ngcontent-%COMP%]{margin-left:1vw}#video-wrapper[_ngcontent-%COMP%]{height:10px}#trans[_ngcontent-%COMP%]{height:450px}.child2[_ngcontent-%COMP%]{margin:5px;width:345px;height:365px;overflow:auto}.middle[_ngcontent-%COMP%]{margin:5px;width:500px;height:200px}.child3[_ngcontent-%COMP%]{left:269px;position:relative;right:-269px;top:1px}.full-width[_ngcontent-%COMP%]{width:100%}video#local-video[_ngcontent-%COMP%]{border-radius:15px;display:flex;flex-wrap:wrap;justify-content:space-between;inset:-237px -220px 147px 296px;max-height:100px;max-width:100%;object-fit:contain;position:relative;transform:matrix(1,0,0,1,0,130.667)}video#remote-video[_ngcontent-%COMP%]{border-radius:15px;display:flex;flex-wrap:wrap;justify-content:space-between;inset:-123px -71px 147px 53px;max-height:300px;max-width:100%;object-fit:contain;position:relative;transform:matrix(1,0,0,1,0,130.667)}div.row.p-2[_ngcontent-%COMP%]{bottom:46px;display:flex;flex-wrap:wrap;justify-content:space-evenly;margin-top:380px}.folloWUP[_ngcontent-%COMP%]{width:100%;word-wrap:break-word;white-space:normal;overflow-wrap:anywhere}.stream-list[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.stream-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{white-space:normal}.stream-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_stream 5s linear}@keyframes _ngcontent-%COMP%_stream{0%{width:0}to{width:100%}}.item[_ngcontent-%COMP%]{width:200px}.fileUpload[_ngcontent-%COMP%]{width:200px;display:flex;flex-direction:column}.image-size[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover;width:500px}"]})}return o})();var m=r(5313);function gt(o,s){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Scheduled Time"),t.qZA())}function ht(o,s){if(1&o&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.start,"EEEE, MMMM d, y, h:mm a"))}}function _t(o,s){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Ending Time"),t.qZA())}function ft(o,s){if(1&o&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.end,"EEEE, MMMM d, y, h:mm a"))}}function vt(o,s){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Status"),t.qZA())}function bt(o,s){if(1&o&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.appointment_status)}}function Zt(o,s){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Payment"),t.qZA())}function Ct(o,s){if(1&o&&(t.TgZ(0,"mat-cell")(1,"span"),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.payment_status)}}function xt(o,s){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Actions"),t.qZA())}const Tt=function(o,s){return["/doctor/videoCall",o,s]};function yt(o,s){if(1&o&&(t.TgZ(0,"button",17),t._uU(1," Join "),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.WLB(1,Tt,e.patient,e.doctor))}}function At(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-cell")(1,"button",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDeleteAppointment(a.appointment_id))}),t._uU(2," Delete "),t.qZA(),t.YNc(3,yt,2,4,"button",16),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.isJoinVisible(e.start,e.expiresAt))}}function kt(o,s){1&o&&t._UZ(0,"mat-header-row")}function wt(o,s){1&o&&t._UZ(0,"mat-row")}let Ut=(()=>{class o{constructor(e){this.doctorService=e,this.displayedColumns=["scheduledTime","endingTime","status","actions"],this.bookedAppointments=[]}ngOnInit(){this.onbookedAppointments()}onbookedAppointments(){this.doctorService.getbookedAppointments().subscribe(e=>{this.bookedAppointments=e,this.bookedAppointments.forEach(n=>{n.expiresAt=new Date(n.start).getTime()+18e5}),this.bookedAppointments.sort((n,i)=>new Date(i.start).getTime()-new Date(n.start).getTime())})}isJoinVisible(e,n){const i=new Date(e),a=new Date;return i.getTime()<=a.getTime()&&a.getTime()<=n}onDeleteAppointment(e){this.doctorService.delAppointment(e).subscribe(n=>{console.log("appointment deleted succesfully",n)})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.O))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dappointment"]],decls:37,vars:3,consts:[[1,"toolbar"],[1,"jello-vertical"],[1,"nav-link",3,"click"],[1,"nav-link"],["routerLink","/find-doctors",1,"nav-link"],[1,"mat-elevation-z10",3,"dataSource"],["matColumnDef","scheduledTime"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","endingTime"],["matColumnDef","status"],["matColumnDef","payment"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(n,i){1&n&&(t.TgZ(0,"div")(1,"mat-toolbar",0)(2,"h1",1),t._uU(3,"HealthLink 360"),t.qZA(),t.TgZ(4,"h1")(5,"a",2),t.NdJ("click",function(){return i.onbookedAppointments()}),t._uU(6,"Show Appointments"),t.qZA()(),t.TgZ(7,"h1")(8,"a",3),t._uU(9,"Video Consult"),t.qZA()(),t.TgZ(10,"h1")(11,"a",4),t._uU(12,"Medicines"),t.qZA()(),t.TgZ(13,"h1")(14,"a",4),t._uU(15,"Lab Tests"),t.qZA()()()(),t._UZ(16,"br")(17,"br")(18,"br"),t.TgZ(19,"mat-table",5),t.ynx(20,6),t.YNc(21,gt,2,0,"mat-header-cell",7),t.YNc(22,ht,4,4,"mat-cell",8),t.BQk(),t.ynx(23,9),t.YNc(24,_t,2,0,"mat-header-cell",7),t.YNc(25,ft,4,4,"mat-cell",8),t.BQk(),t.ynx(26,10),t.YNc(27,vt,2,0,"mat-header-cell",7),t.YNc(28,bt,3,1,"mat-cell",8),t.BQk(),t.ynx(29,11),t.YNc(30,Zt,2,0,"mat-header-cell",7),t.YNc(31,Ct,3,1,"mat-cell",8),t.BQk(),t.ynx(32,12),t.YNc(33,xt,2,0,"mat-header-cell",7),t.YNc(34,At,4,1,"mat-cell",8),t.BQk(),t.YNc(35,kt,1,0,"mat-header-row",13),t.YNc(36,wt,1,0,"mat-row",14),t.qZA()),2&n&&(t.xp6(19),t.Q6J("dataSource",i.bookedAppointments),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[d.O5,p.rH,g.lW,C.Ye,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.uU],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:50px}.toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-right:20px}.nav-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;cursor:pointer}.join-button[_ngcontent-%COMP%]:hover{min-width:50px;margin-right:10px;font-size:smaller;animation:_ngcontent-%COMP%_heartbeat 1.5s ease-in-out infinite both}@keyframes _ngcontent-%COMP%_heartbeat{0%{transform:scale(1);transform-origin:center center;animation-timing-function:ease-out}10%{transform:scale(.91);animation-timing-function:ease-in}17%{transform:scale(.98);animation-timing-function:ease-out}33%{transform:scale(.87);animation-timing-function:ease-in}45%{transform:scale(1);animation-timing-function:ease-out}}"]})}return o})();function Mt(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.ALo(6,"date"),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(2),t.AsE(" ",t.xi3(5,3,"2024-05-01T"+n.doctorBioData.availability_data.start,"HH:mm a")," - ",t.xi3(6,6,"2024-05-01T"+n.doctorBioData.availability_data.end,"HH:mm a")," ")}}let Ot=(()=>{class o{constructor(e,n){this.patientService=e,this.route=n,this.doctorBioData={},this.key=""}ngOnInit(){this.key=this.route.snapshot.paramMap.get("doctorId"),this.patientService.getDoctorProfile(this.key).subscribe(e=>{this.doctorBioData=e,console.log("i am doctor profile data for patient : ",this.doctorBioData)})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(Z.e),t.Y36(p.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-about"]],decls:48,vars:8,consts:[[1,"container"],[1,"card"],["src","https://img.freepik.com/free-photo/portrait-3d-male-doctor_23-2151107212.jpg","alt","Doctor Avatar",1,"avatar"],[1,"name"],[1,"info"],[1,"material-icons","info-icon"],[1,"availability-table"],[4,"ngFor","ngForOf"],[1,"description"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t._UZ(5,"br")(6,"br"),t.TgZ(7,"div",4)(8,"i",5),t._uU(9,"school"),t.qZA(),t.TgZ(10,"p")(11,"b"),t._uU(12,"Qualification:"),t.qZA(),t._uU(13),t.qZA()(),t.TgZ(14,"div",4)(15,"i",5),t._uU(16,"work"),t.qZA(),t.TgZ(17,"p")(18,"b"),t._uU(19,"Experience:"),t.qZA(),t._uU(20),t.qZA()(),t.TgZ(21,"div",4)(22,"i",5),t._uU(23,"category"),t.qZA(),t.TgZ(24,"p")(25,"b"),t._uU(26,"Specialization:"),t.qZA(),t._uU(27),t.qZA()(),t.TgZ(28,"div",4)(29,"i",5),t._uU(30,"schedule"),t.qZA(),t.TgZ(31,"b"),t._uU(32,"Availability:"),t.qZA(),t.TgZ(33,"table",6)(34,"tbody"),t.YNc(35,Mt,7,9,"tr",7),t.qZA()()(),t.TgZ(36,"div",4)(37,"i",5),t._uU(38,"attach_money"),t.qZA(),t.TgZ(39,"p")(40,"b"),t._uU(41,"Consultation Fee:"),t.qZA(),t._uU(42),t.qZA()(),t.TgZ(43,"div",8)(44,"b"),t._uU(45,"Description:"),t.qZA(),t.TgZ(46,"p"),t._uU(47),t.qZA()()()()),2&n&&(t.xp6(4),t.Oqu(i.doctorBioData.full_name),t.xp6(9),t.AsE(" MD, ",i.doctorBioData.specialization," - ",i.doctorBioData.qualification,""),t.xp6(7),t.hij(" ",i.doctorBioData.experience_years," years"),t.xp6(7),t.hij(" ",i.doctorBioData.specialization,""),t.xp6(8),t.Q6J("ngForOf",i.doctorBioData.availability_data.days),t.xp6(7),t.hij(" pkr ",i.doctorBioData.consultation_fees," per session"),t.xp6(5),t.Oqu(i.doctorBioData.summary))},dependencies:[d.sg,d.uU],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.card[_ngcontent-%COMP%]{width:400px;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-bottom:20px}.name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:10px}.info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.info-icon[_ngcontent-%COMP%]{margin-right:10px}"]})}return o})();var qt=r(6385),Pt=r(2599);function Dt(o,s){1&o&&t._UZ(0,"mat-divider")}const St=function(o){return{done:o}};function Nt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item"),t.YNc(1,Dt,1,0,"mat-divider",3),t.TgZ(2,"mat-slide-toggle",5),t.NdJ("change",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggle(a))}),t.TgZ(3,"span",6),t._uU(4),t.qZA()(),t.TgZ(5,"button",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.removeTask(a))}),t.TgZ(6,"mat-icon",8),t._uU(7,"delete"),t.qZA()()()}if(2&o){const e=s.$implicit,n=s.index;t.xp6(1),t.Q6J("ngIf",0!=n),t.xp6(1),t.Q6J("checked",!!e.done),t.xp6(1),t.Q6J("ngClass",t.VKq(4,St,e.done)),t.xp6(1),t.Oqu(e.text)}}function Ft(o,s){if(1&o&&(t.TgZ(0,"mat-card")(1,"mat-list"),t.YNc(2,Nt,8,6,"mat-list-item",4),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tasks)}}let It=(()=>{class o{constructor(){this.tasks=[]}addTask(e){""!==e&&this.tasks.push({text:e,done:!1})}removeTask(e){this.tasks.splice(this.tasks.indexOf(e),1)}toggle(e){e.done=!e.done}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-todo"]],decls:7,vars:2,consts:[["matInput","","placeholder","Add new task"],["newtaskinput",""],["mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["color","primary",3,"checked","change"],[3,"ngClass"],["matTooltip","Delete task","matTooltipPosition","above","mat-icon-button","",3,"click"],["aria-label","Example icon-button with a heart icon"]],template:function(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"mat-form-field"),t._UZ(1,"input",0,1),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(2);return i.addTask(u.value),t.KtG(u.value="")}),t._uU(4,"Add"),t.qZA(),t._UZ(5,"br"),t.YNc(6,Ft,3,1,"mat-card",3)}if(2&n){const a=t.MAs(2);t.xp6(3),t.Q6J("disabled",""==a.value),t.xp6(3),t.Q6J("ngIf",i.tasks.length>0)}},dependencies:[d.mk,d.sg,d.O5,y.a8,v.Hw,g.lW,g.RK,qt.d,b.i$,b.Tg,T.KE,S.Nt,Pt.Rr]})}return o})(),Jt=(()=>{class o{constructor(e,n){this.doctorService=e,this.router=n}updateDoctorForm(){this.router.navigate(["/doctor/form"],{queryParams:{updateMode:!0}})}updateDoctorProfile(){this.router.navigate(["/account/Sign-up"],{queryParams:{updateMode:!0}})}onDeleteDoctor(){this.doctorService.deleteDoctor().subscribe(e=>{console.log("doctor deleted successfully",e)})}onDeleteDoctorForm(){this.doctorService.delDocForm().subscribe(e=>{console.log("doctor form deleted successfully",e)})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.O),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],decls:25,vars:0,consts:[[1,"container"],[1,"parent"],[1,"card"],[1,"button-container"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"b"),t._uU(3,"Update Personal Information"),t.qZA()(),t.TgZ(4,"mat-card",2)(5,"div",3)(6,"button",4),t.NdJ("click",function(){return i.updateDoctorProfile()}),t.TgZ(7,"mat-icon"),t._uU(8,"person"),t.qZA(),t._uU(9," Update Personal Information "),t.qZA()(),t.TgZ(10,"div",3)(11,"button",5),t.NdJ("click",function(){return i.updateDoctorForm()}),t.TgZ(12,"mat-icon"),t._uU(13,"edit"),t.qZA(),t._uU(14," Update Medical Form "),t.qZA()(),t.TgZ(15,"div",3)(16,"button",6),t.NdJ("click",function(){return i.onDeleteDoctor()}),t.TgZ(17,"mat-icon"),t._uU(18,"delete"),t.qZA(),t._uU(19," Delete Account "),t.qZA()(),t.TgZ(20,"div",3)(21,"button",6),t.NdJ("click",function(){return i.onDeleteDoctorForm()}),t.TgZ(22,"mat-icon"),t._uU(23,"delete_outline"),t.qZA(),t._uU(24," Delete Medical Form "),t.qZA()()()())},dependencies:[y.a8,v.Hw,g.lW],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.parent[_ngcontent-%COMP%]{max-width:400px;width:100%;margin-bottom:20px}.card[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;border-radius:10px;box-shadow:0 2px 10px #0000001a}.button-container[_ngcontent-%COMP%]{margin-bottom:10px}.mat-raised-button[_ngcontent-%COMP%]{width:100%;text-transform:none}"]})}return o})();var Yt=r(9947);function Ht(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"button",10),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.savePatId(a.id))}),t._uU(5,"Show Chat"),t.qZA()()()}if(2&o){const e=s.$implicit;t.xp6(3),t.Oqu(e.name)}}function Qt(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"p"),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.message)}}function Et(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"p"),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e)}}const Lt=[{path:"",component:I},{path:"dashboard",component:Y},{path:"form",component:$},{path:"videoCall",component:F},{path:"videoCall/:patientId/:doctorId",component:F},{path:"appointments",component:Ut},{path:"about/:doctorId",component:Ot},{path:"chat",component:(()=>{class o{constructor(e,n,i){this.authService=e,this.doctorService=n,this.patientService=i,this.newMessage="",this.messages=[],this.bookedAppointments=[],this.pat_id="",this.chats=[],this.tokeny=""}ngOnInit(){this.onbookedAppointments(),console.log("here are book appointments in chat doctor : ",this.bookedAppointments)}onbookedAppointments(){this.doctorService.getbookedAppointments().subscribe(e=>{const n=Array.from(e.reduce((i,a)=>(i.set(a.patient,{id:a.patient,name:a.patient_name}),i),new Map).values());console.log("Unique patients:",n),this.bookedAppointments=n})}savePatId(e){console.log("Book Appointment clicked for ID:",e),this.pat_id=e,this.getChatHistory(),this.createWebSocketConnection()}createWebSocketConnection(){const e=localStorage.getItem("token");this.tokeny=e,this.chatSocket=new WebSocket(`${Yt.N.testApi}/${this.pat_id}/?token= ${e}`),console.log(),this.chatSocket.onopen=n=>{console.log("Chat socket successfully connected.")},this.chatSocket.onclose=n=>{console.log("Chat socket closed unexpectedly")},this.chatSocket.onmessage=n=>{const a=JSON.parse(n.data).message;this.messages.push(a)}}disconnect(){this.chatSocket&&this.chatSocket.close()}ngOnDestroy(){this.disconnect(),console.log("websocket connectiion closed")}getChatHistory(){this.patientService.getChatHistory({patient:this.pat_id}).subscribe(n=>{this.chats=n,console.log("the patient chat towards doctor",n)})}sendMessage(){this.newMessage.trim()&&(this.chatSocket.send(this.newMessage),this.newMessage="")}removeMessage(e){const n=this.messages.indexOf(e);-1!==n&&this.messages.splice(n,1)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(f.e),t.Y36(h.O),t.Y36(Z.e))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-chat1"]],decls:10,vars:4,consts:[[1,"user-list"],["class","user-card",4,"ngFor","ngForOf"],[1,"chat-container"],[1,"chat-messages-section"],["class","message-card",4,"ngFor","ngForOf"],[1,"chat-input-section"],["placeholder","Enter your message","rows","3",1,"chat-input",3,"ngModel","ngModelChange"],[1,"send-button",3,"click"],[1,"user-card"],[1,"user-details"],[1,"chat-button",3,"click"],[1,"message-card"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Ht,6,1,"div",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3),t.YNc(4,Qt,3,1,"div",4),t.YNc(5,Et,3,1,"div",4),t.qZA(),t.TgZ(6,"div",5)(7,"textarea",6),t.NdJ("ngModelChange",function(c){return i.newMessage=c}),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return i.sendMessage()}),t._uU(9,"Send"),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("ngForOf",i.bookedAppointments),t.xp6(3),t.Q6J("ngForOf",i.chats),t.xp6(1),t.Q6J("ngForOf",i.messages),t.xp6(2),t.Q6J("ngModel",i.newMessage))},dependencies:[d.sg,l.Fj,l.JJ,l.On],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;box-sizing:border-box}.user-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:10px}.user-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;border:1px solid #ccc;border-radius:5px}.user-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.chat-button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#1976d2;color:#fff;border:none;border-radius:3px;cursor:pointer}.chat-button[_ngcontent-%COMP%]:hover{background-color:#115293}.chat-history[_ngcontent-%COMP%]{margin:10px 0}.chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:10px}.chat-input-section[_ngcontent-%COMP%]{display:flex;gap:10px}.chat-input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:5px;resize:none}.send-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#1976d2;color:#fff;border:none;border-radius:3px;cursor:pointer}.send-button[_ngcontent-%COMP%]:hover{background-color:#115293}.chat-messages-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-left:15px}.message-card[_ngcontent-%COMP%]{border-radius:5px}"]})}return o})()},{path:"todo",component:It},{path:"settings",component:Jt}];let Bt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(Lt),p.Bz]})}return o})();var jt=r(9432);let Rt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.ez,Bt,jt.q,N.hx,U.Ns.forRoot({echarts:()=>r.e(177).then(r.bind(r,4177))})]})}return o})()}}]);